<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Brief History of Tools Watching and Changing Your PHP Code | Tomas Votruba</title>
<meta charset="utf-8">
<meta name="robots" content="index, follow">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:creator" content="@votrubaT"/>

<meta property="og:image" content="/assets/images/tomas_votruba.jpg"/>

<link rel="alternate" type="application/rss+xml" title="Tomas Votruba Blog RSS" href="/rss.xml">


<link rel="stylesheet" rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:700&amp;display=swap" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" media="print" onload="this.media='all'">

<link href="/assets/css/style.css?1250533900" rel="stylesheet" type="text/css" />

                <meta property="og:title" content="Brief History of Tools Watching and Changing Your PHP Code" />
        <meta property="og:url" content="https://tomasvotruba.com/blog/2018/10/22/brief-history-of-tools-watching-and-changing-your-php-code" />
        <meta name="description" property="og:description" content="From coding standard tools, over static analysis to instant upgrade tools. This post is going to be a geeky history trip.   Which tool was first? How they **build on shoulders of each other**?" />

            </head>

    <body>
                <!-- post_id: 152 -->
        <div id="menu">
    <div class="container-fluid">
        <a href="/">Home</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/blog">Blog</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/book/the-power-of-automated-refactoring">Book</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/trainings">Trainings</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/contact">Contact</a>
        <span class="pl-2 pr-2">•</span>

        <a href="https://twitter.com/votrubaT" target="blank">Twitter</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/rss.xml" target="blank">RSS</a>
    </div>
</div>

        <div class="container-fluid post" id="content">
            <h1>Brief History of Tools Watching and Changing Your PHP Code</h1>

            <div class="pull-right">
                <a href="https://github.com/tomasvotruba/tomasvotruba.com/edit/main/packages/blog/data/2018/2018-10-22-brief-history-of-tools-watching-and-changing-your-php-code.md">Found a typo? Edit me</a>
            </div>

            <time datetime="2018-10-Mon" class="text-muted">
                2018-10-22
            </time>

            
                            <div class="card border-success mt-4">
                    <div class="card-header text-white bg-success">
                        This post was updated at December 2020 with fresh know-how.
                        <br>
                        <strong>What is new?</strong>
                    </div>
                                            <div class="card-body pb-2">
                            <p>Removed deprecated and unused tools, to keep focus on relevant ones.</p>
                        </div>
                                    </div>

                <br>
            
            <div class="card card-bigger mb-5">
                <div class="card-body pb-2">
                    <p>From coding standard tools, over static analysis to instant upgrade tools. This post is going to be a geeky history trip. <br> <br> Which tool was first? How they <strong>build on shoulders of each other</strong>?</p>
                </div>
            </div>

            <h2 id="1.-coding-standard-tools">1. Coding Standard Tools</h2>
<h3 id="p-h-p-code-sniffer-from-australia"><a href="https://github.com/squizlabs/PHP_CodeSniffer">PHP_CodeSniffer</a> from Australia</h3>
<p><span class="badge badge-light">Tokens</span>
<span class="badge badge-success">Modifies Code</span></p>
<p>The first tool that made it to the mainstream of coding standard tools was created around <strong>2007</strong> by Greg Sherwood from Australia. At least by date <a href="http://gregsherwood.blogspot.com/2006/12/if-not-test-first-then-test-really-soon.html">of the oldest post I could found</a>.</p>
<p>Greg has been maintaining the repository for last <strong>11 years</strong> (at least). I don't know anyone else who would take care of his project for such a long time without stepping back - <strong>much respect</strong>!</p>
<h3 id="p-h-p-c-s-fixer-from-symfony"><a href="https://github.com/FriendsOfPHP/PHP-CS-Fixer">PHP CS Fixer</a> from Symfony</h3>
<p><span class="badge badge-light">Tokens</span>
<span class="badge badge-success">Modifies Code</span></p>
<p>Reporting errors are helpful, but fixing them for you is even more helpful. More people got a similar need and around <a href="https://gist.github.com/fabpot/3f25555dce956accd4dd">Symfony 2.0 times and 2011</a> next tools were born - PHP CS Fixer.</p>
<p><a href="https://gist.github.com/fabpot/3f25555dce956accd4dd">The first version</a> was created by Fabien Potentier, author and founder of Symfony, and it used mostly regular expressions.</p>
<p>The decision to <strong>fix everything by default was the huge jump in history</strong> of these tools. It was the first case of a tool that would be so bold to change your code for you. You had to believe it, you had to overcome the fear of modifying it the wrong way or even deleting. I mean, now we're used to it like to cars, but at one point of history, they were just riding bombs.</p>
<p><br></p>
<p>With <a href="http://fabien.potencier.org/php-cs-fixer-finally-reaches-version-1-0.html">PHP CS Fixer 1.0 release in 2014</a> and rising popularity of <strong>automated fixes</strong> was <strong>big motivation for PHP_CodeSniffer</strong> to add similar feature - <a href="https://github.com/squizlabs/PHP_CodeSniffer/wiki/Fixing-Errors-Automatically"><em>code beautifier</em></a> - to version 2.</p>
<p>It also helped with another issue. The development of PHP_CodeSniffer 2.8 and later almost froze to zero. I remember because I started working on <a href="https://github.com/symplify/easy-coding-standard">EasyCodingStandard</a> right between
PHP_CodeSniffer 2.8 and 3.0 (depending on <code>3.0-dev</code>), which took 14 uncertain months.</p>
<p><strong>So PHP_CodeSniffer now holds <span class="badge badge-success">Modifies Code</span> as well.</strong></p>
<p><br></p>
<p>Both use <code>token_get_all()</code> that basically parses code to strings. Do you want to know <a href="/blog/2017/07/31/how-php-coding-standard-tools-actually-work/">how they actually work</a>?</p>
<h3 id="easy-coding-standard-from-the-czech-republic"><a href="https://github.com/symplify/easy-coding-standard">EasyCodingStandard</a> from the Czech Republic</h3>
<p><span class="badge badge-light">Tokens</span>
<span class="badge badge-success">Modifies Code</span></p>
<p>I saw many projects that use both tools, yet very poorly - because split attention divides the focus in the same ratio. The mission of this tool is <strong>to help new generations to adopt coding standard with almost no effort</strong>. So in <strong>2016</strong> the EasyCodingStandard was born.</p>
<h2 id="2.-static-analysis-tools">2. Static Analysis Tools</h2>
<h3 id="nikic/php-parser"><a href="https://github.com/nikic/PHP-Parser">nikic/php-parser</a></h3>
<p><span class="badge badge-danger">AST</span></p>
<p>This package is barely known for code analysis. But it provides the technology that all the other tool builds on - <em>abstract syntax tree</em> (known as <em>AST</em>).</p>
<p>It all started as a question on <a href="https://stackoverflow.com/questions/5586358/any-decent-php-parser-written-in-php">StackOverflow</a> - <em>Any decent PHP parser written in PHP?</em> nikic answered himself with a <a href="https://github.com/nikic/PHP-Parser"><code>php-parser</code></a> less than a 6 months later.</p>
<p>I would not write this post and neither have my fuel for passion without this tool, so <strong>huge thank you, Nikita, for creating it and maintaining it</strong>.</p>
<p><br></p>
<p>All following tools use an <strong>AST analyzer</strong> - that's how they know what object is <code>$object</code> variable, like in this example:</p>
<pre><code class="language-php">&lt;?php

class SomeObject
{
    public function exist()
    {
    }
}

$object = new SomeObject; // AST remembers that "$object" is "SomeObject" type
$object-&gt;missing(); // here we know that "missing" does not exist in "SomeObject"</code></pre>
<h3 id="p-h-p-stan-by-ondrej-mirtes"><a href="https://github.com/phpstan/phpstan">PHPStan</a> by Ondrej Mirtes</h3>
<p><span class="badge badge-danger">AST</span>
<span class="badge badge-info">
<a href="https://github.com/phpstan/phpstan/releases/tag/0.1">* 2016</a>
</span></p>
<p>If you don't use any static analysis tool, give PHPStan a try. I've made <a href="/blog/2017/01/28/why-I-switched-scrutinizer-for-phpstan-and-you-should-too/">minimalist intro that will help you with first steps </a>. It's worth investing even day or two to set it up because <strong>these tools will join toolkit of everyday use</strong>, like Composer or PHPUnit.</p>
<h3 id="vimeo/psalm-by-matthew-brown"><a href="https://github.com/vimeo/psalm">vimeo/psalm</a> by Matthew Brown</h3>
<p><span class="badge badge-danger">AST</span>
<span class="badge badge-info">
<a href="https://github.com/vimeo/psalm/releases/tag/0.1">* 2016</a>
</span>
<span class="badge badge-success">Modifies Code</span></p>
<p>Psalm is a very interesting tool that was born to fight Vimeo code complexity. It was the first tool from this group of 3, <strong>that started <a href="https://psalm.dev/docs/manipulating_code/fixing/">fixing the code</a></strong>.</p>
<h2 id="3.-deprecation-detectors">3. Deprecation Detectors</h2>
<p>This group is widely used in the framework-agnostic PHP community.</p>
<h3 id="p-h-p-compatibility/p-h-p-compatibility"><a href="https://github.com/PHPCompatibility/PHPCompatibility">PHPCompatibility/PHPCompatibility</a></h3>
<p><span class="badge badge-light">Tokens</span></p>
<p>This tool checks for PHP cross-version compatibility. It allows you to analyze your code for compatibility with higher and lower versions of PHP.</p>
<p><br></p>
<p>It's useful to know what places are wrong, but you still have to fix them all manually.</p>
<h2 id="4.-instant-upgrade-tools">4. Instant Upgrade Tools</h2>
<h3 id="umpirsky/symfony-upgrade-fixer"><a href="https://github.com/umpirsky/Symfony-Upgrade-Fixer">umpirsky/Symfony-Upgrade-Fixer</a></h3>
<p><span class="badge badge-light">Tokens</span>
<span class="badge badge-success">Modifies Code</span>
<span class="badge badge-secondary">Deprecated</span></p>
<p>This tool was created in <strong>2015</strong> and it's revolutionary. Why? It wisely connects the token analysis of PHP CS Fixer with deprecations in Symfony 2 to 3. Imagine it like PHP CS Fixer + <code>sensiolabs-de/deprecation-detector</code> <strong>working for you</strong>.</p>
<p>Isn't that amazing? <strong>You just sit, run this tool and send invoices. Genius!</strong> The features are limited due to Tokens, but still, I love this.</p>
<h3 id="rector"><a href="https://github.com/rectorphp/rector">Rector</a></h3>
<p><span class="badge badge-danger">AST</span>
<span class="badge badge-success">Modifies Code</span></p>
<p>It's <strong>2017</strong> and Rector still had to wait many months to be born. For what?</p>
<p>Well, it's built on php-parser and as it modifies the code and prints it back, it <strong>needed to keep spacing</strong>. That's one of AST drawbacks - it doesn't care about all that coding standards spacings.</p>
<p>They say &quot;history repeats&quot;, but I never trusted that. Untill I saw that similar need Fabien had while making the PHP CS Fixer in 2012 - <a href="https://github.com/nikic/PHP-Parser/issues/41">Optionally add nodes for whitespace</a>. More <strong>people wanted AST-based coding standards</strong>:</p>
<blockquote class="twitter-tweet" data-lang="cs"><p lang="en" dir="ltr"><a href="https://twitter.com/fabpot?ref_src=twsrc%5Etfw">@fabpot</a> zendframework, though we are moving afay from php-cs-fixer because it is not AST-based</p>— Supervising Program (@Ocramius) <a href="https://twitter.com/Ocramius/status/532622405290971136?ref_src=twsrc%5Etfw">12. listopadu 2014</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>php-parser <code>4.0-dev</code> already had this feature, so Rector ran on it since the very start. It was not until <a href="https://github.com/nikic/PHP-Parser/releases/tag/v4.0.0"><strong>February 2018</strong></a> when it was finally released.</p>
<p>Last giant Rector builds on is the one for type analysis - PHPStan. Thanks to that, it <strong>doesn't reinvent the wheel and can focus on the refactoring part</strong>.</p>
<p><br></p>
<p>And that's a brief history of big-brother tools that watch your code and modify it for you.</p>

            <br>


            <div class="card mt-5 border-warning">
                <div class="card-body text-center mt-2">
                    <p>
                        Have you find this post useful? <strong>Do you want more?</strong>
                    </p>
                    <p>
                        Follow me on <a href="https://twitter.com/votrubaT">Twitter</a>, <a href="/rss.xml">RSS</a> or support me on <a href="https://github.com/sponsors/TomasVotruba">GitHub Sponsors</a>.
                    </p>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-body text-white bg-success text-center">
                    
                                            <a href="/blog/2018/10/18/how-i-almost-missed-my-talk-in-php-asia-conference" class="d-block">
                            <div>
                                Read next → <strong>How I Almost Missed My Talk in PHP Asia Conference</strong>
                            </div>
                        </a>
                                    </div>
            </div>

            <br>
            <br>

            <a name="comments"></a>
            <div id="disqus_thread"></div>

<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://itsworthsharing.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
        </div>

        <script id="dsq-count-scr" src="https://itsworthsharing.disqus.com/count.js" async defer></script>

        <link href="/assets/prism/prism.css" rel="stylesheet" type="text/css" />
        <script src="/assets/prism/prism.js"></script>

        <script>
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', 'UA-46082345-1', 'auto');
    ga('send','pageview');
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>
    </body>
</html>
