<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Rector: Part 2 - Maturity of PHP Ecosystem and Founding Fathers | Tomas Votruba</title>
<meta charset="utf-8">
<meta name="robots" content="index, follow">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:creator" content="@votrubaT"/>

<meta property="og:image" content="/assets/images/tomas_votruba.jpg"/>

<link rel="alternate" type="application/rss+xml" title="Tomas Votruba Blog RSS" href="/rss.xml">


<link rel="stylesheet" rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:700&amp;display=swap" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" media="print" onload="this.media='all'">

<link href="/assets/css/style.css?1039733510" rel="stylesheet" type="text/css" />

                <meta property="og:title" content="Rector: Part 2 - Maturity of PHP Ecosystem and Founding Fathers" />
        <meta property="og:url" content="https://tomasvotruba.com/blog/2018/02/26/rector-part-2-maturity-of-php-ecocystem-and-founding-fathers" />
        <meta name="description" property="og:description" content="What it took for Rector to be born?

Paradigm shift, ecosystem maturity, need for speed to solve common problems community has. **And a great team you share [your work with](https://austinkleon.com/show-your-work) that feedbacks and reflects.**
" />

            </head>

    <body>
        <!-- post_id: 78 -->
        <div id="menu">
    <div class="container-fluid">
        <a href="/">Home</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/blog">Blog</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/book/the-power-of-automated-refactoring">Book</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/trainings">Trainings</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/contact">Contact</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/about-me">About Me</a>
        <span class="pl-2 pr-2">•</span>

        <a href="https://twitter.com/votrubaT" target="blank">Twitter</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/rss.xml" target="blank">RSS</a>
    </div>
</div>

        <div class="container-fluid post" id="content">
            <div class="text-center book-banner">
                <a href="https://leanpub.com/rector-the-power-of-automated-refactoring" target="blank" class="text-center">
                    <img src="/assets/images/banner-rector-book.png" class="mb-2 ml-auto mr-auto rounded " style="max-height: 5em" alt="">
                </a>
            </div>

            <h1>Rector: Part 2 - Maturity of PHP Ecosystem and Founding Fathers</h1>

            <div class="pull-right">
                <a href="https://github.com/tomasvotruba/tomasvotruba.com/edit/main/packages/blog/data/2018/2018-02-26-rector-part-2-maturity-of-php-ecocystem-and-founding-fathers.md">Found a typo? Edit me</a>
            </div>

            <time datetime="2018-02-Mon" class="text-muted">
                2018-02-26
            </time>

            
            
            <div class="card card-bigger mb-5">
                <div class="card-body pb-2">
                    <p>What it took for Rector to be born?
<br><br>
Paradigm shift, ecosystem maturity, need for speed to solve common problems community has. <strong>And a great team you share <a href="https://austinkleon.com/show-your-work">your work with</a> that feedbacks and reflects.</strong></p>
                </div>
            </div>

            <p><em>Read also:</em></p>
<ul>
<li><a href="/blog/2018/02/19/rector-part-1-what-and-how/">Part 1 - What and How</a></li>
<li><a href="/blog/2018/03/05/rector-part-3-why-instant-upgrades/">Part 3 - Why Instant Upgrades</a></li>
</ul>
<p><br></p>
<p>It's not that PHP projects didn't need to be updated until 2017. I surely could delegate hundreds of <em>upgrade-hours</em> for my whole career. So <strong>why Now?</strong></p>
<h2 id="Codemods-as-Standard"><em>Codemods</em> as Standard</h2>
<p><em>Codemod</em> is a tool that modifies your code. And you're ok with it.</p>
<p><strong>Many years ago <a href="https://github.com/squizlabs/PHP_CodeSniffer">PHP_CodeSniffer</a> was born</strong> by <a href="https://gregsherwood.blogspot.cz/search/label/PHP_CodeSniffer">Greg Sherwood</a> from Australia. Guess how long ago? <a href="https://gregsherwood.blogspot.cz/2006/12/if-not-test-first-then-test-really-soon.html">In 2006</a>! Tool that checks your coding standard, tabs and spaces, brackets and quotes. First of it's kind to be mainstream in PHP community.</p>
<p><strong>It was followed by <a href="https://github.com/friendsofphp/php-cs-fixer">PHP CS Fixer</a></strong> with <a href="http://fabien.potencier.org/php-cs-fixer-finally-reaches-version-1-0.html">it's first release in 2014</a> by <a href="http://fabien.potencier.org">Fabien Potencier</a>. Did you know the first script <a href="https://gist.github.com/fabpot/3f25555dce956accd4dd">had only 106 lines</a>?</p>
<p>I use daily both of these tools, <a href="/blog/2017/05/03/combine-power-of-php-code-sniffer-and-php-cs-fixer-in-3-lines/">they're both awesome and work best together</a>. Both of them fix the code for you, so you can sleep or have a coffee instead.</p>
<p>It took 12 years and 2 tools with over 4000 stars on Github to get here.</p>
<h2 id="Is-PHP-Ready-for-AST">Is PHP Ready for AST?</h2>
<p>A few years ago <a href="https://www.npopov.com">Nikita Popov</a> started an ambitious project <a href="https://github.com/nikic/PHP-Parser">nikic/PHP-Parser</a>. PHP-Parser parses PHP code to AST. If you're new to Abstract Syntax Tree (AST), check <a href="/blog/2017/11/06/wow-to-change-php-code-with-abstract-syntax-tree/">this post that describes 2 big changes in PHP ecosystem</a> thanks to AST.</p>
<h3 id="Both-Read-and-amp-Write">Both Read &amp; Write?</h3>
<p>PHP_CodeSniffer was read only, which is great for letting you know what is wrong, but not much for getting a coffee instead. So fixing part was added.</p>
<p>Same was for PHP-Parser. It can read a code and allow it analysis.
That's what <a href="https://ondrej.mirtes.cz">Ondřej Mirtes</a> uses in <a href="/blog/2017/01/28/why-I-switched-scrutinizer-for-phpstan-and-you-should-too/">PHPStan</a> - context aware PHP analysis (&quot;this variable is of this type&quot;).</p>
<p>Again useful, but what about that coffee? It won't make itself.</p>
<p><strong>I must say, this is breaking point for Rector</strong>. Without this, Rector would be just annoying tool telling you what is wrong and what you should do (and we had enough control already, right?). Super fortunately, <a href="https://github.com/nikic/PHP-Parser/blob/master/doc/component/Pretty_printing.markdown#formatting-preserving-pretty-printing">write feature was added and released in 2018</a> with php-parser 4.</p>
<p><em>Did you know?</em> That Fabien wanted to use PHP-Parser for PHP CS Fixer in <a href="https://github.com/nikic/PHP-Parser/issues/41">2012</a>, but could not, because the writing part was missing? <em>Patience makes perfect</em> - 6 years later it's there.</p>
<h3 id="Coding-Standard-Tool-that-makes-Code-Nice-and-Shiny">Coding Standard + Tool that makes Code Nice and Shiny</h3>
<p>PHP AST can be saved, but it still needed a bit polishing:</p>
<pre><code class="language-diff"> namespace App;

 use Symfony\Component\HttpFoundation\DeprecatedRequest;

 class Controller
 {
-    public function actionIndex(): DeprecatedRequest
+    public function actionIndex(): \Symfony\Component\HttpFoundation\NewRequest
     {
     }
 }</code></pre>
<p>There was no tool that could do this for you, until <a href="https://github.com/symplify/easy-coding-standard">EasyCodingStandard</a> + <a href="https://github.com/symplify/coding-standard"><code>Symplify\CodingStandard</code></a>.</p>
<p>With that combination, just run <code>vendor/bin/ecs</code> with <a href="https://github.com/symplify/coding-standard#types-should-not-be-referenced-via-a-fullypartially-qualified-name-but-via-a-use-statement">proper setup</a> to fix that:</p>
<pre><code class="language-diff"> namespace App;

+use Symfony\Component\HttpFoundation\NewRequest;
-use Symfony\Component\HttpFoundation\DeprecatedRequest;

 class Controller
 {
-    public function actionIndex(): \Symfony\Component\HttpFoundation\NewRequest
+    public function actionIndex(): NewRequest
     {
     }
 }</code></pre>
<h2 id="Founding-Fathers-of-Rector">Founding Fathers of Rector</h2>
<p>That's how <a href="https://github.com/rectorphp/rector">Rector</a> was born one part after another. At least the ideas.</p>
<p>It's not only about writing code. It's about discussing the idea, finding the right API that not only me but others would understand right away, it's about using other tools. It's about talking with people who already made AST tools, ask for advices and find possible pitfalls. It's about reporting issues and talking with people who maintain  projects you depend on.</p>
<h3 id="FDD-Friendship-Driven-Development">FDD = Friendship-Driven Development</h3>
<p>I don't work for at any company so development of Rector doesn't solve my personal issues. That's how most project is born, like PHPStan to check Slevomat's code. That means I needed other motivation - when my frustration of wasted thousands human-hours was not enough.</p>
<ul>
<li>
<p><strong>Here I'd like to thank <a href="http://petrvacha.com">Petr Vácha</a></strong> for cowork weekend in Brno with in summer 2017, where it all started - in those times named as <em>Refactor</em>. You've been great friend for years and courage in times, when I needed it the most.</p>
</li>
<li>
<p><strong>And <a href="https://davidgrudl.com">David Grudl</a></strong>, who gave me the motivation to dig deep and &quot;just try it&quot; when I felt desperate and useless always with lightness of Zen master.</p>
</li>
<li>
<p><strong>And also <a href="http://nikic.github.com">Nikita Popov</a></strong>, who patiently answered, taught me and fixed all my issues on <code>nikic/php-parser</code>.</p>
</li>
</ul>
<p>Without you, I would not make it here today.</p>
<p><br><br></p>
<p>Happy coding!</p>

            <br>


            <div class="card mt-5 border-warning">
                <div class="card-body text-center mt-2">
                    <p>
                        Have you find this post useful? <strong>Do you want more?</strong>
                    </p>
                    <p>
                        Follow me on <a href="https://twitter.com/votrubaT">Twitter</a>, <a href="/rss.xml">RSS</a> or support me on <a href="https://github.com/sponsors/TomasVotruba">GitHub Sponsors</a>.
                    </p>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-body text-white bg-success text-center">
                                            <a href="/blog/2018/02/19/rector-part-1-what-and-how" class="d-block">
                            <div>
                                Read next → <strong>Rector: Part 1 - What and How</strong>
                            </div>
                        </a>
                                    </div>
            </div>

            <br>
            <br>

            <a name="comments"></a>
            <div id="disqus_thread"></div>

<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://itsworthsharing.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
        </div>

        <script id="dsq-count-scr" src="https://itsworthsharing.disqus.com/count.js" async defer></script>

        <link href="/assets/prism/prism.css" rel="stylesheet" type="text/css" />
        <script src="/assets/prism/prism.js"></script>

        <script>
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', 'UA-46082345-1', 'auto');
    ga('send','pageview');
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>

        <script type="text/javascript">
            // @see https://stackoverflow.com/a/30776817/1348344
            var date = new Date();
            // display every 2nd hour, not to spam users
            if (date.getHours() % 2 === 1) {
                document.querySelector('.book-banner').style.display = 'visible';
            } else {
                document.querySelector('.book-banner').style.display = 'none';
            }
        </script>
    </body>
</html>
