<!DOCTYPE html>
<html lang="en">
    <head>
        <title>PHP Object Calisthenics Made Simple - Version 3.0 is Out Now | Tomas Votruba</title>
<meta charset="utf-8">
<meta name="robots" content="index, follow">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:creator" content="@votrubaT"/>

    <meta property="og:title" content="PHP Object Calisthenics Made Simple - Version 3.0 is Out Now" />
    <meta property="og:url" content="https://tomasvotruba.com/blog/2017/06/26/php-object-calisthenics-rules-made-simple-version-3-0-is-out-now" />

            <meta property="og:image" content="/assets/images/tomas_votruba.jpg"/>
        <meta name="twitter:image" content="/assets/images/tomas_votruba.jpg"/>
    
<link rel="alternate" type="application/rss+xml" title="Tomas Votruba Blog RSS" href="/rss.xml">


<link rel="stylesheet" rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:700&amp;display=swap" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" media="print" onload="this.media='all'">

<link href="/assets/css/style.css?251454036" rel="stylesheet" type="text/css" />

                <meta name="description" property="og:description" content="Object Calisthenics are 9 language-agnostic rules to help you write better and cleaner code.
They help you to get rid of &quot;else&quot; statements, method chaining, long classes or functions, unreadable short names and much more.

Object Calisthenics 3.0 runs on CodeSniffer 3.0 and PHP 7.1. It brings 6 of them with fancy configuration and code examples.
" />
    </head>

    <body>
        <!-- post_id: 44 -->
        <div id="menu">
    <div class="container-fluid">
        <a href="/">Home</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/blog">Blog</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/book/the-power-of-automated-refactoring">Book</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/trainings">Trainings</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/contact">Contact</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/about-me">About Me</a>
        <span class="pl-2 pr-2">•</span>

        <a href="https://twitter.com/votrubaT" target="blank">Twitter</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/rss.xml" target="blank">RSS</a>
    </div>
</div>

        <div class="container-fluid post" id="content">
            <div class="text-center book-banner">
                <a href="https://leanpub.com/rector-the-power-of-automated-refactoring" target="blank" class="text-center">
                    <img src="/assets/images/banner-rector-book.png" class="mb-2 ml-auto mr-auto rounded " style="max-height: 5em" alt="">
                </a>
            </div>

            <h1>PHP Object Calisthenics Made Simple - Version 3.0 is Out Now</h1>

            <div class="pull-right">
                <a href="https://github.com/tomasvotruba/tomasvotruba.com/edit/main/packages/blog/data/2017/2017-06-26-php-object-calisthenics-rules-made-simple-version-3-0-is-out-now.md">Found a typo? Edit me</a>
            </div>

            <time datetime="2017-06-Mon" class="text-muted">
                2017-06-26
            </time>

                            <div class="card border-danger mt-4">
                    <div class="card-header text-white bg-danger">
                        This post is deprecated since December 2018. Its knowledge is old and should not be used.
                        <br>
                        <strong>Why?</strong>
                    </div>
                    <div class="card-body pb-2">
                        <p>In time and after years of use, these rules seems rather &quot;academic&quot;. They're not helpful and shifts developer's focus too close to each code character. <strong>They need to have broader overview of code as whole instead.</strong></p>
<p><strong>Nowadays I shifted to 1 much better metric - <a href="/blog/2018/05/21/is-your-code-readable-by-humans-cognitive-complexity-tells-you/">Cognitive Complexity</a>.</strong></p>
                    </div>
                </div>

                <br>
            
                            <div class="card border-success mt-4">
                    <div class="card-header text-white bg-success">
                        This post was updated at August 2020 with fresh know-how.
                        <br>
                        <strong>What is new?</strong>
                    </div>
                                            <div class="card-body pb-2">
                            <p>Updated with <strong>ECS 5</strong>, Neon to YAML migration and <code>checkers</code> to <code>services</code> migration.<br>
Updated ECS YAML to PHP configuration since <strong>ECS 8</strong>.</p>
                        </div>
                                    </div>

                <br>
            
            <div class="card card-bigger mb-5">
                <div class="card-body pb-2">
                    <p>Object Calisthenics are 9 language-agnostic rules to help you write better and cleaner code.
They help you to get rid of &quot;else&quot; statements, method chaining, long classes or functions, unreadable short names and much more.
<br><br>
<strong>Object Calisthenics 3.0 runs on CodeSniffer 3.0 and PHP 7.1. It brings 6 of them with fancy configuration and code examples</strong>.</p>
                </div>
            </div>

            <p>If you are a coding standard nerd like me, you'll probably have more than just PSR-2 standard in your ruleset. But even if you don't, <a href="https://github.com/object-calisthenics/phpcs-calisthenics-rules">Object Calisthenics</a> is a developer-friendly game changer for your code.</p>
<h2 id="Much-Simpler-than-2-0">Much Simpler than 2.0</h2>
<p><strong>1. You don't have to know a single thing about coding standards to start</strong></p>
<p><strong>2. Simple to install</strong></p>
<pre><code class="language-bash">composer require object-calisthenics/phpcs-calisthenics-rules</code></pre>
<p><strong>3. You can start with 1 sniff</strong></p>
<p>Quick quiz: what is this variable?</p>
<pre><code class="language-php">$this-&gt;di-&gt;...;</code></pre>
<p><em>Dependency Injection? Dependency Injection Container?</em> Who would guess it's <em>Donation Invoice</em>!</p>
<p><strong><a href="https://github.com/object-calisthenics/phpcs-calisthenics-rules#6-do-not-abbreviate">Rule #6 - Do Not Abbreviate</a></strong> checks these cases. <strong>It detects short names that are ambiguous and hard to decode.</strong></p>
<p>For a quick check, just run the full config:</p>
<pre><code class="language-bash">vendor/bin/ecs check src --config vendor/object-calisthenics/phpcs-calisthenics-rules/config/object-calisthenics.yml</code></pre>
<p>You can run this locally or put to your CI and you are ready to go.</p>
<h2 id="Fancy-Readme-With-Examples">Fancy Readme With Examples</h2>
<p>We put lots of work to README for the new release. It isn't a long text describing what exactly the rule does and how it originated - there is already <a href="http://williamdurand.fr/2013/06/03/object-calisthenics">a blog post for that</a>.</p>
<p>Instead, README goes right to the point:</p>
<ul>
<li><strong>YES and NO code snippets</strong>,</li>
<li><strong>how to use them</strong> - copy/paste CLI command</li>
<li>and <strong>how to configure them</strong> - link to particular config lines</li>
</ul>
<img src="/assets/images/posts/2017/object-calisthenics/rule6.png" class="img-thumbnail">
<h3 id="Configure-What-You-Need">Configure What You Need</h3>
<p>As you can see in the bottom part of screenshot, most of rules are configurable. It allows you <strong>to adapt their strictness to your specific needs and needs of your project</strong>.</p>
<p><em>Do you prefer to require min 4 chars?</em></p>
<pre><code class="language-php">use Symfony\Component\DependencyInjection\Loader\Configurator\ContainerConfigurator;

return function (ContainerConfigurator $containerConfigurator): void {
    $services = $containerConfigurator-&gt;services();
    $services-&gt;set('ObjectCalisthenics\Sniffs\NamingConventions\ElementNameMinimalLengthSniff')
        -&gt;property('minLength', 4);
};</code></pre>
<p><em>Do you want to add own allowed short names?</em></p>
<pre><code class="language-php">use Symfony\Component\DependencyInjection\Loader\Configurator\ContainerConfigurator;

return function (ContainerConfigurator $containerConfigurator): void {
    $services = $containerConfigurator-&gt;services();

    // Rule 6: Do not abbreviate
    $services-&gt;set(ObjectCalisthenics\Sniffs\NamingConventions\ElementNameMinimalLengthSniff::class)
        -&gt;property('minLength', 4)
        // default: ["i", "id", "to", "up"]
        -&gt;property('allowedShortNames', ['y', 'i', 'id', 'to', 'up']);
};</code></pre>
<h3 id="Minitip-What-Can-You-Configure-in-Particular-Sniff">Minitip: What Can You Configure in Particular Sniff?</h3>
<ul>
<li>Open <code>ElementNameMinimalLengthSniff</code> class in your IDE.</li>
<li><strong>Look for public properties</strong>. CodeSniffer uses them to set any configuration.</li>
</ul>
<p>That was Rule 6.</p>
<h2 id="5-more-Rules">5 more Rules</h2>
<h3 id="1-Only-X-Level-of-Indentation-per-Method">1. Only X Level of Indentation per Method</h3>
<p>❌</p>
<pre><code class="language-php">foreach ($sniffGroups as $sniffGroup) {
    foreach ($sniffGroup as $sniffKey =&gt; $sniffClass) {
        if (! $sniffClass instanceof Sniff) {
            throw new InvalidClassTypeException;
        }
    }
}</code></pre>
<p>✅</p>
<pre><code class="language-php">foreach ($sniffGroups as $sniffGroup) {
    $this-&gt;ensureIsAllInstanceOf($sniffGefroup, Sniff::class);
}

// ...
private function ensureIsAllInstanceOf(array $objects, string $type)
{
    // ...
}</code></pre>
<h3 id="2-Do-Not-Use-and-quot-else-and-quot-Keyword">2. Do Not Use &quot;else&quot; Keyword</h3>
<p>❌</p>
<pre><code class="language-php">if ($status === self::DONE) {
    $this-&gt;finish();
} else {
    $this-&gt;advance();
}</code></pre>
<p>✅</p>
<pre><code class="language-php">if ($status === self::DONE) {
    $this-&gt;finish();
    return;
}

$this-&gt;advance();</code></pre>
<h3 id="5-Use-Only-One-Object-Operator-and-gt-per-Line">5. Use Only One Object Operator (<code>-&gt;</code>) per Line</h3>
<p>❌</p>
<pre><code class="language-php">$this-&gt;container-&gt;getBuilder()-&gt;addDefinition(SniffRunner::class);</code></pre>
<p>✅</p>
<pre><code class="language-php">$containerBuilder = $this-&gt;getContainerBuilder();
$containerBuilder-&gt;addDefinition(SniffRunner::class);</code></pre>
<h3 id="7-Keep-Your-Classes-Small">7. Keep Your Classes Small</h3>
<p>❌</p>
<pre><code class="language-php">class SimpleStartupController
{
    // 300 lines of code
}</code></pre>
<p>✅</p>
<pre><code class="language-php">class SimpleStartupController
{
    // 50 lines of code
}</code></pre>
<p>❌</p>
<pre><code class="language-php">class SomeClass
{
    public function simpleLogic()
    {
        // 30 lines of code
    }
}</code></pre>
<p>✅</p>
<pre><code class="language-php">class SomeClass
{
    public function simpleLogic()
    {
        // 10 lines of code
    }
}</code></pre>
<p>❌</p>
<pre><code class="language-php">class SomeClass
{
    // 20 properties
}</code></pre>
<p>✅</p>
<pre><code class="language-php">class SomeClass
{
    // 5 properties
}</code></pre>
<p>❌</p>
<pre><code class="language-php">class SomeClass
{
    // 20 methods
}</code></pre>
<p>✅</p>
<pre><code class="language-php">class SomeClass
{
    // 5 methods
}</code></pre>
<h3 id="9-Do-not-Use-Getters-and-Setters">9. Do not Use Getters and Setters</h3>
<p>Classes should not contain public properties.</p>
<p>❌</p>
<pre><code class="language-php">class ImmutableBankAccount
{
    public $currency = 'USD';</code></pre>
<p>✅</p>
<pre><code class="language-php">class ImmutableBankAccount
{
    private $currency = 'USD';</code></pre>
<p>Method should represent behavior, not set values.</p>
<p>❌</p>
<pre><code class="language-php">    private $amount;

    public function setAmount(int $amount)
    {
        $this-&gt;amount = $amount;
    }
}</code></pre>
<p>✅</p>
<pre><code class="language-php">    private $amount;

    public function withdrawAmount(int $withdrawnAmount)
    {
        $this-&gt;amount -= $withdrawnAmount;
    }
}</code></pre>
<p>Check <a href="https://github.com/object-calisthenics/phpcs-calisthenics-rules#implemented-rule-sniffs">the README</a> to see how to use them and configure them.</p>
<h2 id="9-and-ndash-6-3-Where-is-the-Rest-of-Rules">9 &ndash; 6 = 3... Where is the Rest of Rules?</h2>
<p>There are 3 more rules to complete the list from <a href="https://www.amazon.com/ThoughtWorks-Anthology-Technology-Innovation-Programmers/dp/193435614X">the original manifesto</a>:</p>
<ol start="3">
<li>Wrap Primitive Types and Strings</li>
<li>Use First Class Collections</li>
<li>Do Not Use Classes With More Than Two Instance Variables</li>
</ol>
<p>They are mostly related to DDD (<a href="https://github.com/dddinphp">Domain Driven Design</a>), <a href="https://github.com/object-calisthenics/phpcs-calisthenics-rules#not-implemented-rules---too-strict-vague-or-annoying">too strict to use in practise or too vague to cover them with semantic rule</a>.</p>
<h2 id="Thanks-to-all-Contributors">Thanks to all Contributors</h2>
<p>Last but not least, I'd like to personally thank contributors who helped to make this version happen as it is:</p>
<ul>
<li><a href="https://github.com/frenck">@frenck</a></li>
<li><a href="https://github.com/mihaeu">@mihaeu</a></li>
<li><a href="https://github.com/roukmoute">@roukmoute</a></li>
<li><a href="https://github.com/UFOMelkor">@UFOMelkor</a></li>
</ul>
<p>Without your help, this would not have been possible.
Thank you guys.</p>
<h2 id="To-Sum-up-Object-Calisthenics-3-0">To Sum up Object Calisthenics 3.0</h2>
<ul>
<li><strong>Simple setup over boring academic explanations</strong>.</li>
<li>Rules are <em>explained in examples</em>.</li>
<li>0-setup. You can just <strong>copy-paste CLI commands and run it</strong>.</li>
<li>You can choose a <strong>level of strictness that suits you</strong> thanks to flexible configuration.</li>
</ul>
<p>To find more details about this release see <a href="https://github.com/object-calisthenics/phpcs-calisthenics-rules/releases/tag/v3.0.0">Release notes on Github</a>.</p>

            <br>


            <div class="card mt-5 border-warning">
                <div class="card-body text-center mt-2">
                    <p>
                        Have you find this post useful? <strong>Do you want more?</strong>
                    </p>
                    <p>
                        Follow me on <a href="https://twitter.com/votrubaT">Twitter</a>, <a href="/rss.xml">RSS</a> or support me on <a href="https://github.com/sponsors/TomasVotruba">GitHub Sponsors</a>.
                    </p>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-body text-white bg-success text-center">
                                            <a href="/blog/2017/11/20/how-to-write-interesting-job-offers-for-programmers" class="d-block">
                            <div>
                                Read next → <strong>How to Write Interesting Jobs Offers for Programmers</strong>
                            </div>
                        </a>
                                    </div>
            </div>

            <br>
            <br>

            <a name="comments"></a>
            <div id="disqus_thread"></div>

<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://itsworthsharing.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
        </div>

        <script id="dsq-count-scr" src="https://itsworthsharing.disqus.com/count.js" async defer></script>

        <link href="/assets/prism/prism.css" rel="stylesheet" type="text/css" />
        <script src="/assets/prism/prism.js"></script>

        <script>
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', 'UA-46082345-1', 'auto');
    ga('send','pageview');
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>

        <script type="text/javascript">
            // @see https://stackoverflow.com/a/30776817/1348344
            var date = new Date();
            // display every 2nd hour, not to spam users
            if (date.getHours() % 2 === 1) {
                document.querySelector('.book-banner').style.display = 'visible';
            } else {
                document.querySelector('.book-banner').style.display = 'none';
            }
        </script>
    </body>
</html>
