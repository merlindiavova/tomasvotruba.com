<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Why we Migrated from Nette to Symfony in 3 Weeks - Part 3 - Brain Drain Dead Packages-Lock | Tomas Votruba</title>
<meta charset="utf-8">
<meta name="robots" content="index, follow">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:creator" content="@votrubaT"/>

<meta property="og:image" content="/assets/images/tomas_votruba.jpg"/>

<link rel="alternate" type="application/rss+xml" title="Tomas Votruba Blog RSS" href="/rss.xml">


<link rel="stylesheet" rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:700&amp;display=swap" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" media="print" onload="this.media='all'">

<link href="/assets/css/style.css?1210038894" rel="stylesheet" type="text/css" />

                <meta property="og:title" content="Why we Migrated from Nette to Symfony in 3 Weeks - Part 3 - Brain Drain Dead Packages-Lock" />
        <meta property="og:url" content="https://tomasvotruba.com/blog/2019/03/11/why-we-migrated-from-nette-to-symfony-in-3-weeks-part-3" />
        <meta name="description" property="og:description" content="Do you want to **migrate your project from Nette to Symfony**? In [the part 2](/blog/2019/03/07/why-we-migrated-from-nette-to-symfony-in-3-weeks-part-2/) we looked at **escaping semver hell**.

Today we&#039;ll look on **package vendor-locks** caused by brain drain.
" />

                    <meta property="og:image" content="https://tomasvotruba.com/assets/images/posts/2019/nette-to-symfony3/nette-object-your-code.png" />
            <meta name="twitter:card" content="summary_large_image"/>
            </head>

    <body>
        <!-- post_id: 193 -->
        <div id="menu">
    <div class="container-fluid">
        <a href="/">Home</a>
        <span class="pl-2 pr-2">‚Ä¢</span>

        <a href="/blog">Blog</a>
        <span class="pl-2 pr-2">‚Ä¢</span>

        <a href="/book/the-power-of-automated-refactoring">Book</a>
        <span class="pl-2 pr-2">‚Ä¢</span>

        <a href="/trainings">Trainings</a>
        <span class="pl-2 pr-2">‚Ä¢</span>

        <a href="/contact">Contact</a>
        <span class="pl-2 pr-2">‚Ä¢</span>

        <a href="/about-me">About Me</a>
        <span class="pl-2 pr-2">‚Ä¢</span>

        <a href="https://twitter.com/votrubaT" target="blank">Twitter</a>
        <span class="pl-2 pr-2">‚Ä¢</span>

        <a href="/rss.xml" target="blank">RSS</a>
    </div>
</div>

        <div class="container-fluid post" id="content">
            <div class="text-center book-banner">
                <a href="https://leanpub.com/rector-the-power-of-automated-refactoring" target="blank" class="text-center">
                    <img src="/assets/images/banner-rector-book.png" class="mb-2 ml-auto mr-auto rounded " style="max-height: 5em" alt="">
                </a>
            </div>

            <h1>Why we Migrated from Nette to Symfony in 3 Weeks - Part 3 - Brain Drain Dead Packages-Lock</h1>

            <div class="pull-right">
                <a href="https://github.com/tomasvotruba/tomasvotruba.com/edit/main/packages/blog/data/2019/2019-03-11-why-we-migrated-from-nette-to-symfony-in-3-weeks-part-3.md">Found a typo? Edit me</a>
            </div>

            <time datetime="2019-03-Mon" class="text-muted">
                2019-03-11
            </time>

            
            
            <div class="card card-bigger mb-5">
                <div class="card-body pb-2">
                    <p>Do you want to <strong>migrate your project from Nette to Symfony</strong>? In <a href="/blog/2019/03/07/why-we-migrated-from-nette-to-symfony-in-3-weeks-part-2/">the part 2</a> we looked at <strong>escaping semver hell</strong>.
<br><br>
Today we'll look on <strong>package vendor-locks</strong> caused by brain drain.</p>
                </div>
            </div>

            <p><em>This post will be a bit harder for me because I'm part of this problem. I'm a former Nette activist and open-source hyper. I created many open-source packages Nette developers use, but those are not actively maintained nor developed for the last couple of years. I'm sorry about that.</em></p>
<p><br></p>
<p><strong>If you love Nette, <a href="/blog/2018/05/31/symfony-vs-laravel-vs-nette-which-php-framework-you-should-choose/">keep using it</a>. This post is for people, whose companies are hurt by being locked to Nette ecosystem and who want to solve that but don't know how or if that is even possible.</strong></p>
<h2 id="February-2017">February 2017...</h2>
<p>When we talked with <a href="https://janmikes.cz">Honza</a> about framework A ‚Üí framework B migration first related to <a href="https://entry.do">Entry.do</a>, it was on the first PHP Mountains 2017. Rector was still 5 months before being born, so manual work was the only way.</p>
<p>First, we looked into <code>composer.json</code> and tried to get rid of some packages. What packages we won't need on Symfony?</p>
<ul>
<li><code>kdyby/events</code></li>
<li><code>kdyby/console</code></li>
<li><code>kdyby/doctrine</code></li>
<li><code>kdyby/rabbitmq</code></li>
<li><code>kdyby/redis</code></li>
<li><code>kdyby/translation</code></li>
<li><code>zenify/doctrine-behaviors</code></li>
<li><code>zenify/doctrine-migrations</code></li>
<li><code>zenify/doctrine-filters</code></li>
<li><code>zenify/modular-latte-filters</code></li>
<li><code>zenify/doctrine-fixtures</code></li>
<li><code>zenify/doctrine-extensions-tree</code></li>
</ul>
<p><strong>We could drop all these</strong>, because:</p>
<ul>
<li><code>kdyby/*</code> is basically integration of Symfony packages with <code>nette/di</code>,</li>
<li>and <code>zenify/*</code> is basically <code>doctrine/*</code> integration with <code>nette/di</code></li>
</ul>
<p>Of course, you can't delete them right away. Yet, <a href="/blog/2019/02/21/how-we-migrated-from-nette-to-symfony-in-3-weeks-part-1/#3-automated-migration-gt-manual-changes">Rector covers most of this migration now</a>, so this part is fine.</p>
<h2 id="Upgrade-Lagging">Upgrade Lagging</h2>
<p>We decided to remove Symfony/Doctrine <em>glue packages</em> first, so we could work with fewer dependencies and be more flexible. And upgrade PHP first, so we can use right the newest Symfony packages.</p>
<p>We tried to remove one <code>zenify/*</code> package (because it's small ‚Üí possibly easy to replace) and use the package we have in control.</p>
<h3 id="object"><code>object</code></h3>
<p>Thing is, PHP 7.2 introduced <code>object</code> keyword:</p>
<img src="/assets/images/posts/2019/nette-to-symfony3/nette-object-easy.png" class="img-thumbnail">
<p>Nette had class <code>Nette\Object</code> that was actively promoted as the parent of all classes in your code. Now it had *<em>to be removed from all these classes and replaced by trait</em>:</p>
<pre><code class="language-diff"> &lt;?php

-class SomeClass extends Nette\Object
+class SomeClass
 {
+    use Nette\SmartObject;
 }</code></pre>
<p><em>If you still have this problem, <a href="https://github.com/rectorphp/rector/blob/master/docs/rector_rules_overview.md#parentclasstotraitsrector">use Rector that handles this case</a>.</em></p>
<p><br></p>
<p>In that time, we had to use PHPStorm old-school <em>find &amp; replace</em> with regex pattern:</p>
<img src="/assets/images/posts/2019/nette-to-symfony3/nette-object-your-code.png">
<p>The upgrade path is like a road with holes. It's getting crappy, but there is still at least some road üëç</p>
<p><strong>But what if there are many packages</strong>, that nobody actively takes care of?</p>
<img src="/assets/images/posts/2019/nette-to-symfony3/nette-object-in-3rd-party.png">
<p><strong>Until the maintainer fixes that, the upgrade path is closed</strong>. We'd have to fork every Nette package that is not maintained, fix it manually in the code and add them into <code>composer.json</code>.</p>
<p>We don't talk about small package with few classes that is easy to rewrite:</p>
<img src="/assets/images/posts/2019/nette-to-symfony3/downloads.png" class="img-thumbnail">
<p>Most of Kdyby packages still have <a href="https://packagist.org/packages/kdyby/doctrine/stats">500-900 daily downloads</a>. Even if we take CI servers into account, that still <strong>might be 120-150 PHP applications</strong> locked to legacy with packages that no-one maintains.</p>
<blockquote class="blockquote text-center mt-5 mb-5">
    "When you stop growing, you start dying."
</blockquote>
<h2 id="Nette-Brain-Drain">Nette Brain Drain?</h2>
<p>With a healthy active community as in Laravel or Symfony, there would be PR and we never came across this problem. What's different with Nette?</p>
<p>David Grudl, the author of Nette <a href="https://twitter.com/geekovo/status/417869320677367808">tweeted at the end of 2013</a> that <strong>he ends with Nette</strong>. &quot;One tweet&quot;, you might think, but there was more of similar news on Nette forum and popular Czech IT blogs.</p>
<p>Many years later, when I become a Symfony consultant, I asked companies why did they choose Symfony over Nette. After all, there were Nette meetups in our the Czech Republic every month and maybe 2 non-Nette PHP meetups about other frameworks. The answer was almost unanimous: when they discussed what PHP framework to use, they saw David's tweet. <strong>They needed something stable they could for the next 5 years.</strong></p>
<p><br></p>
<p>In following years, without anyone noticing, <strong>slow brain drain from Nette to Symfony, Java or Javascript</strong> started:</p>
<ul>
<li><a href="https://prochazka.su">Filip Proch√°zka</a>, the author of Kdyby ‚Üí is now Java programmer</li>
<li><a href="https://patrik.votocek.cz">Patrik Votoƒçek</a>, one of first Nette evangelist and author of Nella ‚Üí  switched to Symfony, then to chaos monkey,</li>
<li><a href="https://github.com/mrtnzlml">Martin Zl√°mal</a>, very active Nette evangelist who held many Nette/PHP talks on university ‚Üí now works with Javascript at Kiwi.com</li>
<li><a href="http://enumag.cz">J√°chym Tou≈°ek</a>, active Symfony to Nette integrator ‚Üí switched to Symfony</li>
<li>I, author of Zenify and Symnedi ‚Üí switched to Symfony</li>
<li>...</li>
</ul>
<p><strong>Many of open-source packages for Nette slowly become unmaintained.</strong> So this error is new status-quo for these packages:</p>
<img src="/assets/images/posts/2019/nette-to-symfony3/nette-object-in-3rd-party.png">
<p><br></p>
<p>When we realized with Honza that night, that to upgrade project means &quot;fork every unmaintained dependency and I hope there will be better times&quot;, we stopped. But <strong>the motivation remained and 2 years later</strong>, with better skills and Rector, we managed to migrate the application from Nette to Symfony in less than a month.</p>
<p><br></p>
<h2 id="Come-to-Meetup-and-Tell-Us-About-Your-Problem">Come to Meetup and Tell Us About Your Problem</h2>
<p>Are you stuck with Nette at home and thinking about in your wet dreams Symfony? This is your lucky week! :)</p>
<p>Honza Mikes will talk about Nette to Symfony migration on PHP meetup in Prague this Thursday - 14. 3.</p>
<p>Entrance free, language is English and I'll be there too!</p>
<p><br></p>
<p>Happy coding!</p>

            <br>


            <div class="card mt-5 border-warning">
                <div class="card-body text-center mt-2">
                    <p>
                        Have you find this post useful? <strong>Do you want more?</strong>
                    </p>
                    <p>
                        Follow me on <a href="https://twitter.com/votrubaT">Twitter</a>, <a href="/rss.xml">RSS</a> or support me on <a href="https://github.com/sponsors/TomasVotruba">GitHub Sponsors</a>.
                    </p>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-body text-white bg-success text-center">
                                            <a href="/blog/2019/03/07/why-we-migrated-from-nette-to-symfony-in-3-weeks-part-2" class="d-block">
                            <div>
                                Read next ‚Üí <strong>Why we Migrated from Nette to Symfony in 3 Weeks - Part 2 - Escaping Semantic Hell</strong>
                            </div>
                        </a>
                                    </div>
            </div>

            <br>
            <br>

            <a name="comments"></a>
            <div id="disqus_thread"></div>

<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://itsworthsharing.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
        </div>

        <script id="dsq-count-scr" src="https://itsworthsharing.disqus.com/count.js" async defer></script>

        <link href="/assets/prism/prism.css" rel="stylesheet" type="text/css" />
        <script src="/assets/prism/prism.js"></script>

        <script>
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', 'UA-46082345-1', 'auto');
    ga('send','pageview');
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>

        <script type="text/javascript">
            // @see https://stackoverflow.com/a/30776817/1348344
            var date = new Date();
            // display every 2nd hour, not to spam users
            if (date.getHours() % 2 === 1) {
                document.querySelector('.book-banner').style.display = 'visible';
            } else {
                document.querySelector('.book-banner').style.display = 'none';
            }
        </script>
    </body>
</html>
