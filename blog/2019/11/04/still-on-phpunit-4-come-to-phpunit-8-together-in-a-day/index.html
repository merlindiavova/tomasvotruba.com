<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Still on PHPUnit 4? Come to PHPUnit 8 Together in a Day | Tomas Votruba</title>
<meta charset="utf-8">
<meta name="robots" content="index, follow">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:creator" content="@votrubaT"/>

    <meta property="og:image" content="https://tomasvotruba.com/assets/images/posts/2019/phpunit/tweet.png" />
    <meta property="og:title" content="Still on PHPUnit 4? Come to PHPUnit 8 Together in a Day" />
    <meta property="og:url" content="https://tomasvotruba.com/blog/2019/11/04/still-on-phpunit-4-come-to-phpunit-8-together-in-a-day" />

    <meta name="twitter:image" content="https://tomasvotruba.com/assets/images/posts/2019/phpunit/tweet.png"/>

<link rel="alternate" type="application/rss+xml" title="Tomas Votruba Blog RSS" href="/rss.xml">


<link rel="stylesheet" rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:700&amp;display=swap" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" media="print" onload="this.media='all'">

<link href="/assets/css/style.css?1216812948" rel="stylesheet" type="text/css" />

                <meta name="description" property="og:description" content="Last month I was on [PHPSW meetup](https://twitter.com/akrabat/status/1181998973588037632) in Bristol UK with Rector talk. To be honest, [Nette to Symfony migration under 80 hours](/blog/2019/08/26/how-we-migrated-54-357-lines-of-code-nette-to-symfony-in-2-people-under-80-hours/) was not a big deal there.

To my surprise, **upgrading PHPUnit tests was**. So I was thinking, let&#039;s take it from the floor in one go, from PHPUnit 4 to the latest PHPUnit 8.
" />
    </head>

    <body>
        <!-- post_id: 224 -->
        <div id="menu">
    <div class="container-fluid">
        <a href="/">Home</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/blog">Blog</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/book/the-power-of-automated-refactoring">Book</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/trainings">Trainings</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/contact">Contact</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/about-me">About Me</a>
        <span class="pl-2 pr-2">•</span>

        <a href="https://twitter.com/votrubaT" target="blank">Twitter</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/rss.xml" target="blank">RSS</a>
    </div>
</div>

        <div class="container-fluid post" id="content">
            <div class="text-center book-banner">
                <a href="https://leanpub.com/rector-the-power-of-automated-refactoring" target="blank" class="text-center">
                    <img src="/assets/images/banner-rector-book.png" class="mb-2 ml-auto mr-auto rounded " style="max-height: 5em" alt="">
                </a>
            </div>

            <h1>Still on PHPUnit 4? Come to PHPUnit 8 Together in a Day</h1>

            <div class="pull-right">
                <a href="https://github.com/tomasvotruba/tomasvotruba.com/edit/main/packages/blog/data/2019/2019-11-04-still-on-phpunit-4-come-to-phpunit-8-together-in-a-day.md">Found a typo? Edit me</a>
            </div>

            <time datetime="2019-11-Mon" class="text-muted">
                2019-11-04
            </time>

            
                            <div class="card border-success mt-4">
                    <div class="card-header text-white bg-success">
                        This post was updated at November 2020 with fresh know-how.
                        <br>
                        <strong>What is new?</strong>
                    </div>
                                            <div class="card-body pb-2">
                            <p>Switch from deprecated <code>--set</code> option to <code>rector.php</code> config.</p>
                        </div>
                                    </div>

                <br>
            
            <div class="card card-bigger mb-5">
                <div class="card-body pb-2">
                    <p>Last month I was on <a href="https://twitter.com/akrabat/status/1181998973588037632">PHPSW meetup</a> in Bristol UK with Rector talk. To be honest, <a href="/blog/2019/08/26/how-we-migrated-54-357-lines-of-code-nette-to-symfony-in-2-people-under-80-hours/">Nette to Symfony migration under 80 hours</a> was not a big deal there.
<br><br>
To my surprise, <strong>upgrading PHPUnit tests was</strong>. So I was thinking, let's take it from the floor in one go, from PHPUnit 4 to the latest PHPUnit 8.</p>
                </div>
            </div>

            <img src="/assets/images/posts/2019/phpunit/tweet.png" class="mt-4 mb-4">
<h2 id="1-Planning">1. Planning</h2>
<p>Before we dive into the upgrading of our tests, we need to <strong>look at minimal PHP version</strong> required by each PHPUnit.
The <a href="https://github.com/sebastianbergmann/phpunit/wiki/Development-and-Release-Process">PHPUnit release process</a> states, <strong>that each new PHPUnit major version requires a newer minor PHP version</strong>.</p>
<p>What does that mean?</p>
<table class="table table-bordered table-responsive">
    <thead class="thead-inverse">
        <tr>
            <th>PHPUnit</th>
            <th>Required PHP version</th>
            <th>Relase Year</th>
        </tr>
    </thead>
    <tr>
        <td>PHPUnit 4</td>
        <td>PHP 5.3-5.6</td>
        <td>2015</td>
    </tr>
    <tr>
        <td>PHPUnit 5</td>
        <td>PHP 5.6-7.4</td>
        <td>2016</td>
    </tr>
    <tr>
        <td>PHPUnit 6</td>
        <td>PHP 7.0-7.4</td>
        <td>2017</td>
    </tr>
    <tr>
        <td>PHPUnit 7</td>
        <td>PHP 7.1-7.4</td>
        <td>2018</td>
    </tr>
    <tr>
        <td>PHPUnit 8</td>
        <td>PHP 7.2-7.4</td>
        <td>2019</td>
    </tr>
</table>
<p>We need to plan and combine the PHP upgrade.</p>
<p>This is <strong>the full path</strong> we'll go through:</p>
<ul>
<li>upgrade PHP 5.3 → 5.6</li>
<li>upgrade PHPUnit 4 → 5</li>
<li>upgrade PHP 5.6 → 7.0</li>
<li>upgrade PHPUnit 5 → 6</li>
<li>upgrade PHP 7.0 → 7.1</li>
<li>upgrade PHPUnit 6 → 7</li>
<li>upgrade PHP 7.1 → 7.2</li>
<li>upgrade PHPUnit 7 → 8</li>
</ul>
<p><em>Note: To keep this post simple, we'll focus on PHPUnit upgrade only here. But it's possible you'll need to use Rector for PHP upgrades between PHPUnit upgrade steps too.</em></p>
<h2 id="2-Single-Version-Upgrade-1-pull-request">2. Single Version Upgrade = 1 pull-request</h2>
<p>Do you enjoy <em>the rush</em> of changing a thousand files at once? It drives to do even more and more changes.</p>
<p>The same thing happens with upgrading code - we upgrade PHP and tests passes, great! Let's do upgrade PHPUnit. Oh, maybe we could refactor this method so it's more readable. Oh, now this other method looks silly, let's clean that up too...</p>
<img src="/assets/images/posts/2019/phpunit/explode.jpg" class="img-thumbnail">
<p><span class="text-danger">
<strong>STOP!</strong>
</span></p>
<p>This is the easiest way <strong>to get stuck</strong> in broken tests, with dug up pieces of code all over the project, overheat our brain in <a href="/blog/2018/05/21/is-your-code-readable-by-humans-cognitive-complexity-tells-you/">huge cognitive complexity</a> and <del>give up</del> rage quit the upgrade saying &quot;it's hard as they say&quot;.</p>
<p><div class="card ml-4 mt-4 border-warning float-right post-snippet" style="width: 14em">
    <div class="card-body">
        Would you like to <strong>learn more about Rector</strong>? Step by step, from zero to hero?
        <br>

        <div class="text-center">
            <a href="/book/the-power-of-automated-refactoring/">
                <img src="/assets/images/rector_book.png" class="mb-3 mt-3 shadow">
                Get our new book
            </a>
        </div>
    </div>
</div>
</p>
<h3 id="The-Golden-Rule-of-Successful-Upgrade">The Golden Rule of Successful Upgrade</h3>
<ul>
<li>one minor version at a time</li>
<li>one pull-request at a time</li>
<li>tested, our CI passes</li>
<li><strong>only after the PR is merged, we go to next minor version</strong></li>
</ul>
<p>Unless you're upgrading 10 test files, of course. But in the rest of the case, this approach would save me many failed attempts in the paths. That's why <strong>planning is the most important step of all</strong> for huge upgrade operations.</p>
<h2 id="3-PHPUnit-4-to-5">3. PHPUnit 4 to 5</h2>
<h3 id="From-getMock-to-getMockBuilder">From <code>getMock()</code> to <code>getMockBuilder()</code></h3>
<pre><code class="language-diff"> final class MyTest extends PHPUnit_Framework_TestCase
 {
     public function test()
     {
-        $someClassMock = $this-&gt;getMock('SomeClass');
+        $someClassMock = $this-&gt;getMockBuilder('SomeClass')-&gt;getMock();
     }
 }</code></pre>
<p><br></p>
<p>These changes can be delegated to Rector:</p>
<pre><code class="language-bash">composer require phpunit/phpunit "^5.0" --dev</code></pre>
<p>Update set in <code>rector.php</code></p>
<pre><code class="language-php">use Rector\PHPUnit\Set\PHPUnitSetList;
use Rector\Config\RectorConfig;

return function (RectorConfig $rectorConfig): void {
    $rectorConfig-&gt;import(PHPUnitSetList::PHPUNIT_50);
};</code></pre>
<p>Run Rector</p>
<pre><code class="language-bash">vendor/bin/rector process tests</code></pre>
<h2 id="4-PHPUnit-5-to-6">4. PHPUnit 5 to 6</h2>
<p>This is the release where <strong>PHPUnit got namespaces</strong>, yay! Well, yay for the project, nay for the upgrades.</p>
<h3 id="From-Underscore-to-Slash">From Underscore to Slash</h3>
<p>Although there is a lot of underscore &lt;=&gt; slash aliases for a smoother upgrade, it will be removed in the future PHPUnit version, so we better deal with it right now.</p>
<p>First, we need to replace all:</p>
<pre><code class="language-diff">-PHPUnit_Framework_TestCase
+\PHPUnit\Framework\TestCase # mind the pre-slash "\"</code></pre>
<p>Without pre-slash, your code might fail.</p>
<p><a class="btn btn-primary" href="https://3v4l.org/5Sjjh">
See 3v4l.org to understand why
</a></p>
<p><br></p>
<p>Second, replace the rest of the <code>PHPUnit_*</code> classes with a namespace. Listeners, test suites, exceptions... etc.
This is hell for us human, luckily easy-pick for Rector.</p>
<h3 id="Add-doesNotPerformAssertions-to-test-With-no-Assertion">Add <code>doesNotPerformAssertions</code> to test With no Assertion</h3>
<pre><code class="language-diff">+    /**
+     * @doesNotPerformAssertions
+     */
     public function testNoError()
     {
         new SomeObject(25);
     }</code></pre>
<h3 id="setExpectedException-to-expectException"><code>setExpectedException()</code> to <code>expectException()</code></h3>
<p>And not only that! Also, split arguments to own method:</p>
<pre><code class="language-diff"> &lt;?php

 class MyTest extends \PHPUnit\Framework\TestCase
 {
     public function test()
     {
-        $this-&gt;setExpectedException('SomeException', $message, 101);
+        $this-&gt;expectException('SomeException');
+        $this-&gt;expectExceptionMessage($message);
+        $this-&gt;expectExceptionCode(101);
     }
 }</code></pre>
<p>Also <code>setExpectedExceptionRegExp()</code> was removed.</p>
<h3 id="at-expectedException-to-expectException"><code>@expectedException</code> to <code>expectException()</code></h3>
<p>These changes are a real challenge for simple human attention:</p>
<pre><code class="language-diff">-expectedException
+expectException</code></pre>
<p>Mind the missing &quot;ed&quot;.</p>
<pre><code class="language-diff"> &lt;?php

 class MyTest extends \PHPUnit\Framework\TestCase
 {
-    /**
-     * @expectedException SomeException
-     */
     public function test()
     {
+        $this-&gt;expectException('SomeException');
     }
 }</code></pre>
<p><br></p>
<p>These changes can be delegated to Rector:</p>
<pre><code class="language-bash">composer require phpunit/phpunit "^6.0" --dev</code></pre>
<p>Update set in <code>rector.php</code></p>
<pre><code class="language-php">use Rector\PHPUnit\Set\PHPUnitSetList;
use Rector\Config\RectorConfig;

return function (RectorConfig $rectorConfig): void {
    $rectorConfig-&gt;import(PHPUnitSetList::PHPUNIT_60);
};</code></pre>
<p>Run Rector</p>
<pre><code class="language-bash">vendor/bin/rector process tests</code></pre>
<h2 id="5-PHPUnit-6-to-7">5. PHPUnit 6 to 7</h2>
<h3 id="Remove-and-quot-test-and-quot-prefix-on-Data-Providers">Remove &quot;test&quot; prefix on Data Providers</h3>
<p>I have no idea how tests and data provider methods were detected before this:</p>
<pre><code class="language-diff"> class WithTestAnnotation extends \PHPUnit\Framework\TestCase
 {
     /**
-     * @dataProvider testProvideDataForWithATestAnnotation()
+     * @dataProvider provideDataForWithATestAnnotation()
      */
     public function test()
     {
         // ...
     }

-    public function testProvideDataForWithATestAnnotation()
+    public function provideDataForWithATestAnnotation()
     {
         return ['123'];
     }
 }</code></pre>
<h3 id="Rename-at-scenario-annotation-to-at-test">Rename <code>@scenario</code> annotation to <code>@test</code></h3>
<pre><code class="language-diff"> class WithTestAnnotation extends \PHPUnit\Framework\TestCase
 {
     /**
-     * @scenario
+     * @test
      */
     public function test()
     {
         // ...
     }
 }</code></pre>
<h3 id="Change-withConsecutive-Arguments-to-Iterable">Change <code>withConsecutive()</code> Arguments to Iterable</h3>
<p>This rather small change can cause a huge headache. It's <a href="https://github.com/sebastianbergmann/phpunit/commit/72098d80f0cfc06c7e0652d331602685ce5b4b51">a fix of silent false positive</a>.</p>
<p>How would you fix the following code, if you know that the argument of <code>withConsecutive()</code> must be iterable (array, iterator...)?</p>
<pre><code class="language-php">class SomeClass
{
    public function run($one, $two)
    {
    }
}

class SomeTestCase extends \PHPUnit\Framework\TestCase
{
    public function test()
    {
        $someClassMock = $this-&gt;createMock(SomeClass::class);
        $someClassMock
            -&gt;expects($this-&gt;exactly(2))
            -&gt;method('run')
            -&gt;withConsecutive(1, 2, 3, 5);
    }
}</code></pre>
<p>Like this?</p>
<pre><code class="language-diff">--&gt;withConsecutive(1, 2, 3, 5);
+-&gt;withConsecutive([1, 2, 3, 5]);</code></pre>
<p>Well, the tests would pass it, but it would be another silent positive. Look at <code>SomeClass::run()</code> method. How many arguments does it have?</p>
<p>Two. So we need to create array chunks of size 2.</p>
<pre><code class="language-diff">--&gt;withConsecutive(1, 2, 3, 5);
+-&gt;withConsecutive([1, 2], [3, 5]);</code></pre>
<p><br></p>
<p>These changes can be delegated to Rector:</p>
<pre><code class="language-bash">composer require phpunit/phpunit "^7.0" --dev</code></pre>
<p>Update set in <code>rector.php</code></p>
<pre><code class="language-php">use Rector\PHPUnit\Set\PHPUnitSetList;
use Rector\Config\RectorConfig;

return function (RectorConfig $rectorConfig): void {
    $rectorConfig-&gt;import(PHPUnitSetList::PHPUNIT_70);
    $rectorConfig-&gt;import(PHPUnitSetList::PHPUNIT_75);
};</code></pre>
<p>Run Rector</p>
<pre><code class="language-bash">vendor/bin/rector process tests</code></pre>
<h2 id="6-PHPUnit-7-to-8">6. PHPUnit 7 to 8</h2>
<h3 id="Ignore-Cache-File">Ignore Cache File</h3>
<p>The <a href="https://github.com/sebastianbergmann/phpunit/pull/3147">optional caching of test results</a> added in PHPUnit 7.3 is not enabled by default. We need to add the cache file to <code>.gitignore</code>:</p>
<pre><code class="language-txt"># .gitignore
.phpunit.result.cache</code></pre>
<h3 id="Remove-type-dataName-in-PHPUnit-Framework-TestCase-Constructor-Override">Remove type <code>$dataName</code> in <code>PHPUnit\Framework\TestCase</code> Constructor Override</h3>
<pre><code class="language-diff"> &lt;?php

 abstract class MyAbstractTestCase extends \PHPUnit\Framework\TestCase
 {
-    public function __construct(?string $name = null, array $data = [], string $dataName = '')
+    public function __construct(?string $name = null, array $data = [], $dataName = '')
     {
     }
 }</code></pre>
<h3 id="Replace-assertContains-with-Specific-assertStringContainsString-Method">Replace <code>assertContains()</code> with Specific <code>assertStringContainsString()</code> Method</h3>
<pre><code class="language-diff"> &lt;?php

 final class SomeTest extends \PHPUnit\Framework\TestCase
 {
     public function test()
     {
-        $this-&gt;assertContains('foo', 'foo bar');
+        $this-&gt;assertStringContainsString('foo', 'foo bar');

-        $this-&gt;assertNotContains('foo', 'foo bar');
+        $this-&gt;assertStringNotContainsString('foo', 'foo bar');
     }
 }</code></pre>
<h3 id="Replace-assertInternalType-with-Specific-Methods">Replace <code>assertInternalType()</code> with Specific Methods</h3>
<p>This change <a href="https://github.com/sebastianbergmann/phpunit/commit/a406c85c51edd76ace29119179d8c21f590c939e">is huge</a>.</p>
<p><strong>2 methods were removed, 22 methods are added.</strong></p>
<pre><code class="language-diff"> &lt;?php

 final class SomeTest extends \PHPUnit\Framework\TestCase
 {
     public function test()
     {
-        $this-&gt;assertInternalType('string', $value);
+        $this-&gt;assertIsString($value);
     }
 }</code></pre>
<h3 id="Change-assertEquals-method-Parameters-to-new-Specific-Methods">Change <code>assertEquals()</code> method Parameters to new Specific Methods</h3>
<pre><code class="language-diff"> final class SomeTest extends \PHPUnit\Framework\TestCase
 {
     public function test()
     {
         $value = 'value';
-        $this-&gt;assertEquals('string', $value, 'message', 5.0);
+        $this-&gt;assertEqualsWithDelta('string', $value, 5.0, 'message');

-        $this-&gt;assertEquals('string', $value, 'message', 0.0, 20);
+        $this-&gt;assertEquals('string', $value, 'message', 0.0);

-        $this-&gt;assertEquals('string', $value, 'message', 0.0, 10, true);
+        $this-&gt;assertEqualsCanonicalizing('string', $value, 'message');

-        $this-&gt;assertEquals('string', $value, 'message', 0.0, 10, false, true);
+        $this-&gt;assertEqualsIgnoringCase('string', $value, 'message');
     }
 }</code></pre>
<h3 id="Last-is-now-Namespaced">Last <code>_</code> is now Namespaced</h3>
<p>This removes the last piece of back-compatible underscore class:</p>
<pre><code class="language-diff">-PHPUnit_Framework_MockObject_MockObject
+PHPUnit\Framework\MockObject\MockObject</code></pre>
<h3 id="Replace-assertArraySubset-with">Replace <code>assertArraySubset()</code> with</h3>
<p>This method was removed <a href="https://github.com/sebastianbergmann/phpunit/issues/3494">because of its vague behavior</a>.
The proposed solution is <a href="https://github.com/rdohms/phpunit-arraysubset-asserts">rdohms/phpunit-arraysubset-asserts</a> polyfill.</p>
<pre><code class="language-diff"> namespace Acme\Tests;

+use DMS\PHPUnitExtensions\ArraySubset\Assert;

 final class AssertTest extends \PHPUnit\Framework\TestCase
 {
     public function testPreviouslyStaticCall(): void
     {
-        $this-&gt;assertArraySubset(['bar' =&gt; 0], ['bar' =&gt; '0'], true);
+        Assert::assertArraySubset(['bar' =&gt; 0], ['bar' =&gt; '0'], true);
     }
 }</code></pre>
<p>To use this package and upgrade to it, run:</p>
<pre><code class="language-bash">composer require --dev dms/phpunit-arraysubset-asserts</code></pre>
<p>Update set in <code>rector.php</code></p>
<pre><code class="language-php">use Rector\PHPUnit\Set\PHPUnitSetList;
use Rector\Config\RectorConfig;

return function (RectorConfig $rectorConfig): void {
    $rectorConfig-&gt;import(PHPUnitSetList::PHPUNIT80_DMS);
};</code></pre>
<p>Run Rector</p>
<pre><code class="language-bash">vendor/bin/rector process tests</code></pre>
<h3 id="Add-void-to-PHPUnit-Framework-TestCase-Methods">Add <code>void</code> to <code>PHPUnit\Framework\TestCase</code> Methods</h3>
<p>This one hits 2 common methods we often use:</p>
<pre><code class="language-diff">-setUp()
+setUp(): void</code></pre>
<pre><code class="language-diff">-tearDown()
+tearDown(): void</code></pre>
<p>Also less common ones:</p>
<ul>
<li><code>setUpBeforeClass()</code></li>
<li><code>assertPreConditions()</code></li>
<li><code>assertPostConditions()</code></li>
<li><code>tearDownAfterClass()</code></li>
<li><code>onNotSuccessfulTest()</code></li>
</ul>
<p>For this one, we'll use little help from Symplify:</p>
<pre><code class="language-bash">composer require symplify/phpunit-upgrader --dev
vendor/bin/phpunit-upgrader voids /tests</code></pre>
<p>That's it!</p>
<p><br></p>
<p>Then back to Rector - Update set in <code>rector.php</code></p>
<pre><code class="language-php">use Rector\PHPUnit\Set\PHPUnitSetList;
use Rector\Config\RectorConfig;

return function (RectorConfig $rectorConfig): void {
    $rectorConfig-&gt;import(PHPUnitSetList::PHPUNIT_80);
};</code></pre>
<p>Then:</p>
<pre><code class="language-bash">composer require phpunit/phpunit "^8.0" --dev</code></pre>
<p><br></p>
<p>In the end, you should see at least PHPUnit 8.5+:</p>
<pre><code class="language-bash">vendor/bin/phpunit --version
$ PHPUnit 8.5.15 by Sebastian Bergmann and contributors.</code></pre>
<p>That's it! Congrats!</p>
<p><br></p>
<p><strong>Did you find a change that we missed here?</strong> Share it in comments, so we can make this upgrade path complete and smooth for all future readers. Thank you for the whole PHP community!</p>
<p><br></p>
<p>Happy coding!</p>

            <br>


            <div class="card mt-5 border-warning">
                <div class="card-body text-center mt-2">
                    <p>
                        Have you find this post useful? <strong>Do you want more?</strong>
                    </p>
                    <p>
                        Follow me on <a href="https://twitter.com/votrubaT">Twitter</a>, <a href="/rss.xml">RSS</a> or support me on <a href="https://github.com/sponsors/TomasVotruba">GitHub Sponsors</a>.
                    </p>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-body text-white bg-success text-center">
                                            <a href="/blog/2019/10/28/all-you-always-wanted-to-know-about-monorepo-but-were-afraid-to-ask" class="d-block">
                            <div>
                                Read next → <strong>All You Always Wanted to Know About Monorepo But Were Afraid To Ask</strong>
                            </div>
                        </a>
                                    </div>
            </div>

            <br>
            <br>

            <a name="comments"></a>
            <div id="disqus_thread"></div>

<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://itsworthsharing.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
        </div>

        <script id="dsq-count-scr" src="https://itsworthsharing.disqus.com/count.js" async defer></script>

        <link href="/assets/prism/prism.css" rel="stylesheet" type="text/css" />
        <script src="/assets/prism/prism.js"></script>

        <script>
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', 'UA-46082345-1', 'auto');
    ga('send','pageview');
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>

        <script type="text/javascript">
            // @see https://stackoverflow.com/a/30776817/1348344
            var date = new Date();
            // display every 2nd hour, not to spam users
            if (date.getHours() % 2 === 1) {
                document.querySelector('.book-banner').style.display = 'visible';
            } else {
                document.querySelector('.book-banner').style.display = 'none';
            }
        </script>
    </body>
</html>
