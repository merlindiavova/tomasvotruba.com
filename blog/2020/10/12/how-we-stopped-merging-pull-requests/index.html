<!DOCTYPE html>
<html lang="en">
    <head>
        <title>How We Stopped Merging Pull Requests | Tomas Votruba</title>
<meta charset="utf-8">
<meta name="robots" content="index, follow">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:creator" content="@votrubaT"/>

    <meta property="og:title" content="How We Stopped Merging Pull Requests" />
    <meta property="og:url" content="https://tomasvotruba.com/blog/2020/10/12/how-we-stopped-merging-pull-requests" />

            <meta property="og:image" content="/assets/images/tomas_votruba.jpg"/>
        <meta name="twitter:image" content="/assets/images/tomas_votruba.jpg"/>
    
<link rel="alternate" type="application/rss+xml" title="Tomas Votruba Blog RSS" href="/rss.xml">


<link rel="stylesheet" rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:700&amp;display=swap" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" media="print" onload="this.media='all'">

<link href="/assets/css/style.css?944711861" rel="stylesheet" type="text/css" />

                <meta name="description" property="og:description" content="What comes before merging a pull request? Code-review, feedback from developers, and fixes to make the reviewer happy. After that, we only need the tests, coding standard, PHPStan, and Rector to pass in the CI.

Here is an idea - **don&#039;t merge any pull-request from now on**...
" />
    </head>

    <body>
        <!-- post_id: 282 -->
        <div id="menu">
    <div class="container-fluid">
        <a href="/">Home</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/blog">Blog</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/book/the-power-of-automated-refactoring">Book</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/trainings">Trainings</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/contact">Contact</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/about-me">About Me</a>
        <span class="pl-2 pr-2">•</span>

        <a href="https://twitter.com/votrubaT" target="blank">Twitter</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/rss.xml" target="blank">RSS</a>
    </div>
</div>

        <div class="container-fluid post" id="content">
            <div class="text-center book-banner">
                <a href="https://leanpub.com/rector-the-power-of-automated-refactoring" target="blank" class="text-center">
                    <img src="/assets/images/banner-rector-book.png" class="mb-2 ml-auto mr-auto rounded " style="max-height: 5em" alt="">
                </a>
            </div>

            <h1>How We Stopped Merging Pull&nbsp;Requests</h1>

            <div class="pull-right">
                <a href="https://github.com/tomasvotruba/tomasvotruba.com/edit/main/packages/blog/data/2020/2020-10-12-how-we-stopped-merging-pull-requests.md">Found a typo? Edit me</a>
            </div>

            <time datetime="2020-10-Mon" class="text-muted">
                2020-10-12
            </time>

            
                            <div class="card border-success mt-4">
                    <div class="card-header text-white bg-success">
                        This post was updated at February 2021 with fresh know-how.
                        <br>
                        <strong>What is new?</strong>
                    </div>
                                            <div class="card-body pb-2">
                            <p>From Kodiak to native <a href="https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/automatically-merging-a-pull-request">GitHub Auto-merge</a></p>
                        </div>
                                    </div>

                <br>
            
            <div class="card card-bigger mb-5">
                <div class="card-body pb-2">
                    <p>What comes before merging a pull request? Code-review, feedback from developers, and fixes to make the reviewer happy. After that, we only need the tests, coding standard, PHPStan, and Rector to pass in the CI.
<br><br>
Here is an idea - <strong>don't merge any pull-request from now on</strong>...</p>
                </div>
            </div>

            <p>...and let them opened for ages... no, just kidding.</p>
<h2 id="Don-t-forget-to-Merge">Don't forget to Merge</h2>
<p>But if you already accepted the pull-request, the issues are resolved, <strong>you still have to wait for CI to finish with green</strong>. If you're lucky, it's under 3 minutes, if you're open source 5-8 minutes and with private project 5-30 minutes.</p>
<p>How to kill the waiting time? Go for a coffee, toilet break, or a social leak (Facebook, Twitter, or your favorite PHP blog), get back, see the green checkbox, and click on the merge button. <strong>Or even worse</strong> - you jump to another issue, <a href="/blog/2018/08/27/why-and-how-to-avoid-the-memory-lock/">remember to merge</a>, then switch your focus back and forth...</p>
<img src="/assets/images/posts/2020/kodiak/kodiak_focus.png" alt="" class="img-thumbnail mt-5">
<p><a href="/blog/2020/01/13/why-is-first-instant-feedback-crucial-to-developers/">The instant feedback</a> is killed, and so is the flow.</p>
<blockquote class="blockquote text-center mt-5 mb-5">
<p>&quot;<strong>Can you automate</strong> responsibility developers have to think about?
<br>
Just do it!
<br>
They will be able to focus more and produce better quality code.&quot;</p>
</blockquote>
<p><br></p>
<h2 id="Wait-for-240-pull-requests-a-Month-No-Thanks">Wait for 240 pull-requests a Month? No, Thanks!</h2>
<p>In <a href="https://github.com/rectorphp/rector/pulse/monthly">Rector</a> and <a href="https://github.com/symplify/symplify/pulse/monthly">Symplify</a> <a href="/cluster/monorepo-from-zero-to-hero">mono-repositories</a> we had 240 merge-request for just last month.</p>
<p>That's <strong>240 distractions with ~5 minutes upkeep</strong> = 20 hours wasted by brain-waiting and much more work ruined.</p>
<h2 id="Delegate-and-Automate-Merge-Request">Delegate and Automate Merge Request</h2>
<p>What if I told you just a few percent of these manually? The rest is done by GitHub Auto-merge.</p>
<p>How does <em>GitHub Auto-merge</em> work? You mark the pull-request with the &quot;automerge&quot; tag, then - if CI passes - the pull-request is merged. So instead of waiting 240 times for CI feedback, you'll <strong>add the tag when you finish the review</strong>. Then the pull-request is closed, and you can focus on the next work in the peace.</p>
<h2 id="4-Steps-to-Setup-Auto-Merge">4 Steps to Setup Auto-Merge</h2>
<h3 id="1-Go-to-Setting-of-your-GitHub-Repository">1. Go to Setting of your GitHub Repository</h3>
<img src="/assets/images/posts/2020/kodiak/kodiak_branches_1.png" alt="" class="img-thumbnail mt-3">
<h3 id="2-Add-Branch-Checks-for-master">2. Add Branch Checks for <code>master</code></h3>
<img src="/assets/images/posts/2020/kodiak/kodiak_branches_2.png" alt="" class="img-thumbnail mt-3">
<h3 id="3-Select-Jobs-that-are-Required-to-Pass">3. Select Jobs that are Required to Pass</h3>
<img src="/assets/images/posts/2020/kodiak/kodiak_require.png" alt="" class="img-thumbnail mt-3">
<h3 id="4-Enable-GitHub-Auto-merge">4. Enable GitHub Auto-merge</h3>
<p>Go to your project settings, e.g. <a href="https://github.com/symplify/symplify/settings">https://github.com/symplify/symplify/settings</a></p>
<img src="https://user-images.githubusercontent.com/924196/108640310-3270be80-7499-11eb-93e8-ceb380be00e0.png"  class="img-thumbnail mt-3">
<p><br></p>
<p>Now GitHub is enabled and waiting for your work!</p>
<h2 id="1-Step-to-Automerge-Pull-Request-with-GitHub">1 Step to Automerge Pull-Request with GitHub</h2>
<p>Is your PR ready? Go down and enable the automerge:</p>
<img src="https://user-images.githubusercontent.com/924196/108640368-8380b280-7499-11eb-9545-e9c96f6d4cb5.png" class="img-thumbnail">
<p>GitHub waits for the CI to pass and then merges and deletes branch:</p>
<img src="https://user-images.githubusercontent.com/924196/108640447-f0944800-7499-11eb-81ab-05870aa999f9.png" alt="" class="img-thumbnail">
<p>✅</p>
<p><br></p>
<p>Now you've one less to think about for the rest of your life.</p>
<p><br></p>
<p>Happy coding!</p>

            <br>


            <div class="card mt-5 border-warning">
                <div class="card-body text-center mt-2">
                    <p>
                        Have you find this post useful? <strong>Do you want more?</strong>
                    </p>
                    <p>
                        Follow me on <a href="https://twitter.com/votrubaT">Twitter</a>, <a href="/rss.xml">RSS</a> or support me on <a href="https://github.com/sponsors/TomasVotruba">GitHub Sponsors</a>.
                    </p>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-body text-white bg-success text-center">
                                            <a href="/blog/2020/10/05/how-to-reveal-static-call-relationships-in-your-code" class="d-block">
                            <div>
                                Read next → <strong>How to Reveal Static Call Relationships in Your Code</strong>
                            </div>
                        </a>
                                    </div>
            </div>

            <br>
            <br>

            <a name="comments"></a>
            <div id="disqus_thread"></div>

<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://itsworthsharing.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
        </div>

        <script id="dsq-count-scr" src="https://itsworthsharing.disqus.com/count.js" async defer></script>

        <link href="/assets/prism/prism.css" rel="stylesheet" type="text/css" />
        <script src="/assets/prism/prism.js"></script>

        <script>
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', 'UA-46082345-1', 'auto');
    ga('send','pageview');
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>

        <script type="text/javascript">
            // @see https://stackoverflow.com/a/30776817/1348344
            var date = new Date();
            // display every 2nd hour, not to spam users
            if (date.getHours() % 2 === 1) {
                document.querySelector('.book-banner').style.display = 'visible';
            } else {
                document.querySelector('.book-banner').style.display = 'none';
            }
        </script>
    </body>
</html>
