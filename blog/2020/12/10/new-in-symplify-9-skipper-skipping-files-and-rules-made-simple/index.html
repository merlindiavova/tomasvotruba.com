<!DOCTYPE html>
<html lang="en">
    <head>
        <title>New in Symplify 9: Skipper - Skipping Files and Rules made Simple | Tomas Votruba</title>
<meta charset="utf-8">
<meta name="robots" content="index, follow">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:creator" content="@votrubaT"/>

    <meta property="og:title" content="New in Symplify 9: Skipper - Skipping Files and Rules made Simple" />
    <meta property="og:url" content="https://tomasvotruba.com/blog/2020/12/10/new-in-symplify-9-skipper-skipping-files-and-rules-made-simple" />

            <meta property="og:image" content="https://tomasvotruba.com/assets/images/posts/2020/skipper-kangaroo.jpg?cache=123" />
        <meta name="twitter:image" content="https://tomasvotruba.com/assets/images/posts/2020/skipper-kangaroo.jpg?cache=123"/>
    
<link rel="alternate" type="application/rss+xml" title="Tomas Votruba Blog RSS" href="/rss.xml">


<link rel="stylesheet" rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:700&amp;display=swap" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" media="print" onload="this.media='all'">

<link href="/assets/css/style.css?666248139" rel="stylesheet" type="text/css" />

                <meta name="description" property="og:description" content="Symplify 9 brings another component **to ease the life for package developers**. In Rector and ECS, you can ignore specific absolute paths or dynamic paths by `fnmatch()`. You can also ignore specific Rector, Fixer, and Sniff classes.

Both packages use almost the same syntax, yet there are minor differences based and syntax tweaks.

New Skipper component prevents this and allows **you to use standardized syntax in a single `skip` parameters**.
" />
    </head>

    <body>
        <!-- post_id: 292 -->
        <div id="menu">
    <div class="container-fluid">
        <a href="/">Home</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/blog">Blog</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/book/the-power-of-automated-refactoring">Book</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/trainings">Trainings</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/contact">Contact</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/about-me">About Me</a>
        <span class="pl-2 pr-2">•</span>

        <a href="https://twitter.com/votrubaT" target="blank">Twitter</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/rss.xml" target="blank">RSS</a>
    </div>
</div>

        <div class="container-fluid post" id="content">
            <div class="text-center book-banner">
                <a href="https://leanpub.com/rector-the-power-of-automated-refactoring" target="blank" class="text-center">
                    <img src="/assets/images/banner-rector-book.png" class="mb-2 ml-auto mr-auto rounded " style="max-height: 5em" alt="">
                </a>
            </div>

            <h1>New in Symplify 9: Skipper - Skipping Files and Rules made Simple</h1>

            <div class="pull-right">
                <a href="https://github.com/tomasvotruba/tomasvotruba.com/edit/main/packages/blog/data/2020/2020-12-10-new-in-symplify-9-skipper-skipping-files-and-rules-made-simple.md">Found a typo? Edit me</a>
            </div>

            <time datetime="2020-12-Thu" class="text-muted">
                2020-12-10
            </time>

            
            
            <div class="card card-bigger mb-5">
                <div class="card-body pb-2">
                    <p>Symplify 9 brings another component <strong>to ease the life for package developers</strong>. In Rector and ECS, you can ignore specific absolute paths or dynamic paths by <code>fnmatch()</code>. You can also ignore specific Rector, Fixer, and Sniff classes.
<br><br>
Both packages use almost the same syntax, yet there are minor differences based and syntax tweaks.
<br><br>
New Skipper component prevents this and allows <strong>you to use standardized syntax in a single <code>skip</code> parameters</strong>.</p>
                </div>
            </div>

            <p>When I started writing this post, I remembered a TV series from my childhood about the hero kangaroo:</p>
<img src="/assets/images/posts/2020/skipper-kangaroo.jpg" class="img-thumbnail">
<p>It's like Batman, just kangaroo. Anyone? :) Ok, I'm old. Back to the software skipper.</p>
<p><br></p>
<h2 id="and-quot-How-Can-I-Skip-the-and-quot">&quot;How Can I Skip the ...?&quot;</h2>
<p>This is one of the most common questions in Rector or ECS issues. Skip feature is native to most of CLI tools:</p>
<ul>
<li><a href="https://phpstan.org/user-guide/ignoring-errors">PHPStan has <code>ignoreErrors</code> and <code>excludes_analyse</code> parameter</a></li>
<li><a href="https://github.com/squizlabs/PHP_CodeSniffer/wiki/Advanced-Usage#ignoring-files-and-folders">PHP_CodeSniffer has command line and annotation support</a></li>
<li><a href="https://github.com/FriendsOfPHP/PHP-CS-Fixer/issues/3317">PHP CS Fixer</a> is thinking about it since 2017</li>
</ul>
<p>Most packages have at least 2 ways to skip a file or rule:</p>
<ul>
<li>exclude_files</li>
<li>excludedFiles</li>
<li>skip</li>
<li>ignored</li>
<li>ignorePaths</li>
<li>ignoreDirectories</li>
<li>notAllowedPaths</li>
<li>...</li>
</ul>
<p>It makes sense to have each information separated for the package developer. Then they know if you want to skip a path or a rule. But it's <strong>absolute hell for the user of the package</strong>.</p>
<ul>
<li>It's a common case, we need to ignore one file in all our CLI tools.</li>
<li>For each package, we have to learn new syntax.</li>
<li>Typos, hard to remember, you skip a class in paths parameters...</li>
</ul>
<p>We've all been there.</p>
<h2 id="Complexity-opens-Space-for-Bugs">Complexity opens Space for Bugs</h2>
<p>These complicated configuration options also allows to have duplicated skip. Try debugging this:</p>
<pre><code class="language-php">use Symfony\Component\DependencyInjection\Loader\Configurator\ContainerConfigurator;
use Symplify\Skipper\ValueObject\Option;

return function (ContainerConfigurator $containerConfigurator): void {
    $parameters = $containerConfigurator-&gt;parameters();

    $parameters-&gt;set(Option::SKIP, [
        SomeSniff::class =&gt; [
            __DIR__ . '/some-path',
        ]
    ]);

    $parameters-&gt;set(Option::EXCLUDE_RULES, [SomeSniff::class]);
};</code></pre>
<p>Why is the <code>SomeSniff</code> skipped in <code>__DIR__ . '/another-path'</code> too? It shouldn't be, only <code>__DIR__ . '/some-path'</code>.</p>
<h2 id="KISS-The-SKIP-Parameter">KISS: The <code>SKIP</code> Parameter</h2>
<p>Why not take users priority and make it simple for them? Let's use <a href="/blog/2020/03/09/art-of-letting-go/">Occam's razor</a> and provide intuitive choice:</p>
<p>Single <code>skip</code> parameter:</p>
<pre><code class="language-php">use Symfony\Component\DependencyInjection\Loader\Configurator\ContainerConfigurator;
use Symplify\Skipper\ValueObject\Option;

return function (ContainerConfigurator $containerConfigurator): void {
    $parameters = $containerConfigurator-&gt;parameters();

    $parameters-&gt;set(Option::SKIP, [
        // absolute directory
        __DIR__ . '/some-path',

        // absolute file
        __DIR__ . '/some-path/some-file.php',

        // with mask
        '*/Fixture/*',

        // specific class
        SomeClass::class,

        // specific class specific path
        NarrowedClass::class =&gt; [__DIR__ . '/src/OnlyHere'],

        // class code in paths
        AnotherSniff::class . '.SomeCode' =&gt; ['*Sniff.php', '*YamlFileLoader.php'],
    ]);
};</code></pre>
<p>That's it!</p>
<p><br></p>
<p>That's the main principle of <a href="https://github.com/symplify/skipper">Skipper</a>.
Rector 0.9 and ECS 9 build on Skipper, so be sure to use its syntax in <code>ecs.php</code> and <code>rector.php</code>. Instead of many <code>skip</code>/<code>exclude_paths</code>/<code>exclude_rules</code> params, there is just <code>skip</code> now.</p>
<h2 id="How-to-Upgrade-from-Symplify-8-to-9-and-Rector-0-8-to-0-9">How to Upgrade from Symplify 8 to 9 and Rector 0.8 to 0.9</h2>
<p>Just to be sure, this is how you upgrade your <code>ecs.php</code> and <code>rector.php</code> configs:</p>
<pre><code class="language-diff">-$parameters-&gt;set(Option::EXCLUDE_PATHS, [
+$parameters-&gt;set(Option::SKIP, [
     // paths to skip
     '*/Fixture/*',
     __DIR__ . '/packages/easy-hydrator/tests/Fixture',
-]);
-$parameters-&gt;set(Option::SKIP, [
-     ArrayDeclarationSniff::class =&gt; null,
+     ArrayDeclarationSniff::class,
 ]);</code></pre>
<p>After renaming of <code>EXCLUDE_PATHS</code> to <code>SKIP</code>, make sure there is just one <code>SKIP</code> option in your config. Symfony would pick just one of them without telling you.</p>
<p><br></p>
<p>Happy coding!</p>

            <br>


            <div class="card mt-5 border-warning">
                <div class="card-body text-center mt-2">
                    <p>
                        Have you find this post useful? <strong>Do you want more?</strong>
                    </p>
                    <p>
                        Follow me on <a href="https://twitter.com/votrubaT">Twitter</a>, <a href="/rss.xml">RSS</a> or support me on <a href="https://github.com/sponsors/TomasVotruba">GitHub Sponsors</a>.
                    </p>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-body text-white bg-success text-center">
                                            <a href="/blog/2020/12/07/new-in-symplify-9-markdown-diff" class="d-block">
                            <div>
                                Read next → <strong>New in Symplify 9: Markdown Diff</strong>
                            </div>
                        </a>
                                    </div>
            </div>

            <br>
            <br>

            <a name="comments"></a>
            <div id="disqus_thread"></div>

<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://itsworthsharing.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
        </div>

        <script id="dsq-count-scr" src="https://itsworthsharing.disqus.com/count.js" async defer></script>

        <link href="/assets/prism/prism.css" rel="stylesheet" type="text/css" />
        <script src="/assets/prism/prism.js"></script>

        <script>
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', 'UA-46082345-1', 'auto');
    ga('send','pageview');
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>

        <script type="text/javascript">
            // @see https://stackoverflow.com/a/30776817/1348344
            var date = new Date();
            // display every 2nd hour, not to spam users
            if (date.getHours() % 2 === 1) {
                document.querySelector('.book-banner').style.display = 'visible';
            } else {
                document.querySelector('.book-banner').style.display = 'none';
            }
        </script>
    </body>
</html>
