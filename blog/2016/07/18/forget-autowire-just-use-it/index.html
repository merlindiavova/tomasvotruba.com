<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Forget &quot;autowire&quot; and just use it | Tomas Votruba</title>
<meta charset="utf-8">
<meta name="robots" content="index, follow">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:creator" content="@votrubaT"/>

<meta property="og:image" content="/assets/images/tomas_votruba.jpg"/>

<link rel="alternate" type="application/rss+xml" title="Tomas Votruba Blog RSS" href="/rss.xml">


<link rel="stylesheet" rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:700&amp;display=swap" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" media="print" onload="this.media='all'">

<link href="/assets/css/style.css?1421765103" rel="stylesheet" type="text/css" />

                <meta property="og:title" content="Forget &quot;autowire&quot; and just use it" />
        <meta property="og:url" content="https://tomasvotruba.com/blog/2016/07/18/forget-autowire-just-use-it" />
        <meta name="description" property="og:description" content="Autowiring is a great feature that was added in Symfony 2.8. It moves Dependency Injection pattern to the next level.
If you want to use it to its full potential, you still have to add 1 extra line to every service configuration.
Today I will show you, how to get rid of that line.
" />

            </head>

    <body>
        <!-- post_id: 10 -->
        <div id="menu">
    <div class="container-fluid">
        <a href="/">Home</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/blog">Blog</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/book/the-power-of-automated-refactoring">Book</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/trainings">Trainings</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/contact">Contact</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/about-me">About Me</a>
        <span class="pl-2 pr-2">•</span>

        <a href="https://twitter.com/votrubaT" target="blank">Twitter</a>
        <span class="pl-2 pr-2">•</span>

        <a href="/rss.xml" target="blank">RSS</a>
    </div>
</div>

        <div class="container-fluid post" id="content">
            <div class="text-center book-banner">
                <a href="https://leanpub.com/rector-the-power-of-automated-refactoring" target="blank" class="text-center">
                    <img src="/assets/images/banner-rector-book.png" class="mb-2 ml-auto mr-auto rounded " style="max-height: 5em" alt="">
                </a>
            </div>

            <h1>Forget "autowire" and just use it</h1>

            <div class="pull-right">
                <a href="https://github.com/tomasvotruba/tomasvotruba.com/edit/main/packages/blog/data/2016/2016-07-18-forget-autowire-just-use-it.md">Found a typo? Edit me</a>
            </div>

            <time datetime="2016-07-Mon" class="text-muted">
                2016-07-18
            </time>

                            <div class="card border-danger mt-4">
                    <div class="card-header text-white bg-danger">
                        This post is deprecated since May 2017. Its knowledge is old and should not be used.
                        <br>
                        <strong>Why?</strong>
                    </div>
                    <div class="card-body pb-2">
                        <p>You can set autowiring via <a href="https://symfony.com/blog/new-in-symfony-3-3-simpler-service-configuration#default-service-configuration">new <code>_defaults</code> per config file feature</a> since <strong>Symfony 3.3</strong>.</p>
<p>It does pretty much the same thing, with <strong>advantage of having it under control and explicitly defined</strong>.</p>
<p>I recommend using it instead!</p>
                    </div>
                </div>

                <br>
            
            
            <div class="card card-bigger mb-5">
                <div class="card-body pb-2">
                    <p>Autowiring is a great feature that was added in Symfony 2.8. It moves Dependency Injection pattern to the next level.
If you want to use it to its full potential, you still have to add 1 extra line to every service configuration.
Today I will show you, how to get rid of that line.</p>
                </div>
            </div>

            <h2 id="When-to-autowire">When to autowire?</h2>
<p>If you use autowiring daily, you might came across this thinking process before you place <code>autowired: true</code> to your config:</p>
<p><em>1) Has this service constructor dependency?</em></p>
<ul>
<li>No =&gt; skip</li>
<li>Yes =&gt; go on</li>
</ul>
<p><em>2) Is it object?</em></p>
<ul>
<li>No =&gt; skip</li>
<li>Yes =&gt; go on</li>
</ul>
<p><em>3) Is it unique service type?</em></p>
<ul>
<li>No =&gt; add <a href="https://github.com/symfony/symfony/pull/21494"><code>alias</code> for specific name to required service</a></li>
<li>Yes =&gt; autowire</li>
</ul>
<p><em>4) Has the constructor changed during development?</em></p>
<ul>
<li>Start from point 1.</li>
</ul>
<p>Plus some more logic for edge cases like parameters and factories.</p>
<h2 id="Seems-like-function-Could-this-be-automated">Seems like function... Could this be automated?</h2>
<p>You are right! <strong>It can be automated.</strong></p>
<p>This is exactly what <a href="https://github.com/Symplify/DefaultAutowire">Symplify/DefaultAutowire</a> bundle does.</p>
<p>Apart handling feature above for you, it will turn this...</p>
<pre><code class="language-yaml"># app/config/config.yml
services:
    PriceCalculator:
        autowire: true

    ProductRepository:
        autowire: true

    UserFactory:
        autowire: true</code></pre>
<p>...into this:</p>
<pre><code class="language-yaml"># app/config/config.yml
services:
    PriceCalculator: ~

    ProductRepository: ~

    UserFactory: ~</code></pre>
<h2 id="Get-It-Done-in-2-steps">Get It Done in 2 steps</h2>
<h3 id="1-Install-package">1. Install package</h3>
<pre><code class="language-yaml">composer require symplify/default-autowire</code></pre>
<h3 id="2-Register-bundle">2. Register bundle</h3>
<pre><code class="language-php">// app/AppKernel.php

final class AppKernel extends Kernel
{
    public function registerBundles(): array
    {
        $bundles = [
            new Symplify\DefaultAutowire\SymplifyDefaultAutowireBundle(),
            // ...
        ];
    }
}</code></pre>
<p>And that's it!</p>
<p>For further use, <strong>just check Readme for <a href="https://github.com/Symplify/DefaultAutowire">Symplify/DefaultAutowire</a>.</strong></p>

            <br>


            <div class="card mt-5 border-warning">
                <div class="card-body text-center mt-2">
                    <p>
                        Have you find this post useful? <strong>Do you want more?</strong>
                    </p>
                    <p>
                        Follow me on <a href="https://twitter.com/votrubaT">Twitter</a>, <a href="/rss.xml">RSS</a> or support me on <a href="https://github.com/sponsors/TomasVotruba">GitHub Sponsors</a>.
                    </p>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-body text-white bg-success text-center">
                                            <a href="/blog/2016/06/17/filters-pattern-in-nette-database" class="d-block">
                            <div>
                                Read next → <strong>Filters Pattern in Nette Database</strong>
                            </div>
                        </a>
                                    </div>
            </div>

            <br>
            <br>

            <a name="comments"></a>
            <div id="disqus_thread"></div>

<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://itsworthsharing.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
        </div>

        <script id="dsq-count-scr" src="https://itsworthsharing.disqus.com/count.js" async defer></script>

        <link href="/assets/prism/prism.css" rel="stylesheet" type="text/css" />
        <script src="/assets/prism/prism.js"></script>

        <script>
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', 'UA-46082345-1', 'auto');
    ga('send','pageview');
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>

        <script type="text/javascript">
            // @see https://stackoverflow.com/a/30776817/1348344
            var date = new Date();
            // display every 2nd hour, not to spam users
            if (date.getHours() % 2 === 1) {
                document.querySelector('.book-banner').style.display = 'visible';
            } else {
                document.querySelector('.book-banner').style.display = 'none';
            }
        </script>
    </body>
</html>
